<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/Black-Skyline/Black-Skyline.github.io/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/Black-Skyline/Black-Skyline.github.io/assets/apple-touch-icon.png"><link rel="alternate" href="/Black-Skyline/Black-Skyline.github.io/rss.xml" title="黑色天际线的博客空间" type="application/rss+xml"><link rel="alternate" href="/Black-Skyline/Black-Skyline.github.io/atom.xml" title="黑色天际线的博客空间" type="application/atom+xml"><link rel="alternate" type="application/json" title="黑色天际线的博客空间" href="https://github.com/Black-Skyline/Black-Skyline.github.io/feed.json"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="//fonts.geekzu.org/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/Black-Skyline/Black-Skyline.github.io/css/app.css?v=0.2.3"><script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.js"></script><meta name="keywords" content="red_rock third_homework level 0 ~ level 4"><link rel="canonical" href="https://github.com/Black-Skyline/Black-Skyline.github.io/2022/11/03/Python/%E7%AC%AC%E4%B8%89%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88py%EF%BC%89/"><title>第三次课后作业（py）</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">第三次课后作业（py）</h1><div class="meta"><span class="item" title="创建时间：2022-11-03 00:45:35"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2022-11-03T00:45:35+08:00">2022-11-03</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>22k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>20 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/Black-Skyline/Black-Skyline.github.io/" rel="start">testName</a></li></ul><ul class="right" id="rightNav"><li class="item theme" @click="changeThemeByBtn"><i class="ic" :class="{'i-sun': !themeStatus,'i-moon': themeStatus}"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicit4jrvuj20zk0m8785.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicitcxhpij20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicis3attqj20zk0m8k7l.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giciryrr3rj20zk0m8nhk.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicit31ffoj20zk0m8naf.jpg"></li><li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1giciszlczyj20zk0m816d.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/Black-Skyline/Black-Skyline.github.io/">首页</a></span></div><article class="post block" itemscope itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://github.com/Black-Skyline/Black-Skyline.github.io/2022/11/03/Python/%E7%AC%AC%E4%B8%89%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88py%EF%BC%89/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/Black-Skyline/Black-Skyline.github.io/assets/avatar.jpg"><meta itemprop="name" content="寻光"><meta itemprop="description" content="天高路远，逆水行云, 此博客空间为个人学习笔记上传处"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="黑色天际线的博客空间"></span><div class="body md" itemprop="articleBody"><ul><li><p><em>@author</em> <em>xunguang (<span class="exturl" data-url="bWFpbHRvOnh1bmd1YW5nQGJsYWNrLXNreWxpbmUuZ2l0aHViLmlv">xunguang@black-skyline.github.io</span>)</em></p><p><em>@brief</em></p><p><em>@version</em> <em>0.1</em></p><p><em>@date</em> <em>2022-11-03</em></p><p><em>@copyright</em> <em>Copyright (c) 2022</em></p><h1 id="level-0"><a class="anchor" href="#level-0">#</a> level 0</h1><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="level-1"><a class="anchor" href="#level-1">#</a> level 1</h1><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> random</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">def</span> <span class="token function">showHand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    list_a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    res <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">if</span> res <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        string <span class="token operator">=</span> <span class="token string">"石头"</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">elif</span> res <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        string <span class="token operator">=</span> <span class="token string">"剪刀"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        string <span class="token operator">=</span> <span class="token string">"布"</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    list_a<span class="token punctuation">.</span>append<span class="token punctuation">(</span>res<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    list_a<span class="token punctuation">.</span>append<span class="token punctuation">(</span>string<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> list_a</pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Choice</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    rock <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    scissors <span class="token operator">=</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    paper <span class="token operator">=</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>personHand <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="26"></td><td><pre>machineHand <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="27"></td><td><pre>personWinCount <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="28"></td><td><pre>machineWinCount <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="29"></td><td><pre>game_times <span class="token operator">=</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">while</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    game_times <span class="token operator">+=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"第 </span><span class="token interpolation"><span class="token punctuation">&#123;</span>game_times<span class="token punctuation">&#125;</span></span><span class="token string"> 局游戏"</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">while</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"1.石头  2.剪刀  3.布"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        temp <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"请选择你要怎么出（输入数字）："</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token keyword">if</span> temp<span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="37"></td><td><pre>            personHand <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            personHand <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 必要的初始化</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">if</span> personHand <span class="token keyword">in</span> Choice<span class="token punctuation">.</span>value2member_map_<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="41"></td><td><pre>            <span class="token keyword">break</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="43"></td><td><pre>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"输入不正确，请重新输入;\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    list_b <span class="token operator">=</span> showHand<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    machineHand <span class="token operator">=</span> list_b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"电脑选择出</span><span class="token interpolation"><span class="token punctuation">&#123;</span>list_b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span></span><span class="token string">!"</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>personHand <span class="token operator">-</span> machineHand<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>personHand <span class="token operator">-</span> machineHand<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        personWinCount <span class="token operator">+=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="49"></td><td><pre>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"这一局你赢了\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">elif</span> personHand <span class="token operator">==</span> machineHand<span class="token punctuation">:</span></pre></td></tr><tr><td data-num="51"></td><td><pre>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"这一局平局\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="53"></td><td><pre>        tem <span class="token operator">=</span> <span class="token punctuation">(</span>personHand <span class="token operator">-</span> machineHand<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="54"></td><td><pre>        machineWinCount <span class="token operator">+=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"这一局电脑赢了\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token keyword">if</span> personWinCount <span class="token operator">>=</span> <span class="token number">3</span> <span class="token keyword">or</span> machineWinCount <span class="token operator">>=</span> <span class="token number">3</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"截止目前，共进行了 </span><span class="token interpolation"><span class="token punctuation">&#123;</span>game_times<span class="token punctuation">&#125;</span></span><span class="token string"> 局游戏,你赢了 </span><span class="token interpolation"><span class="token punctuation">&#123;</span>personWinCount<span class="token punctuation">&#125;</span></span><span class="token string"> 局，电脑赢了 </span><span class="token interpolation"><span class="token punctuation">&#123;</span>machineWinCount<span class="token punctuation">&#125;</span></span><span class="token string"> 局"</span></span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="60"></td><td><pre>            <span class="token keyword">if</span> personWinCount <span class="token operator">>=</span> <span class="token number">3</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="61"></td><td><pre>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"你获得了游戏胜利"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="62"></td><td><pre>            <span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="63"></td><td><pre>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"电脑获得了游戏胜利"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="64"></td><td><pre>            <span class="token keyword">break</span></pre></td></tr></table></figure><h1 id="level-2"><a class="anchor" href="#level-2">#</a> level 2</h1><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token operator">/</span><span class="token operator">**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> <span class="token operator">*</span> @<span class="token builtin">file</span> mod<span class="token punctuation">.</span>py</pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token operator">*</span> @author xunguang <span class="token punctuation">(</span>xunguang@black<span class="token operator">-</span>skyline<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token operator">*</span> @brief </pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token operator">*</span> @version <span class="token number">0.1</span></pre></td></tr><tr><td data-num="6"></td><td><pre> <span class="token operator">*</span> @date <span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">31</span></pre></td></tr><tr><td data-num="7"></td><td><pre> <span class="token operator">*</span> @parameter name_parameter</pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token operator">*</span> @copyright Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2022</span></pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token operator">*</span> </pre></td></tr><tr><td data-num="10"></td><td><pre> <span class="token operator">*</span><span class="token operator">/</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">def</span> <span class="token function">beautiful</span><span class="token punctuation">(</span>name_parameter<span class="token operator">=</span><span class="token string">"hysj"</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>name_parameter <span class="token operator">+</span> <span class="token string">" is beautiful"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    beautiful<span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    </pre></td></tr><tr><td data-num="20"></td><td><pre>    </pre></td></tr><tr><td data-num="21"></td><td><pre>    </pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token operator">/</span><span class="token operator">**</span></pre></td></tr><tr><td data-num="23"></td><td><pre> <span class="token operator">*</span> @<span class="token builtin">file</span> test<span class="token punctuation">.</span>py</pre></td></tr><tr><td data-num="24"></td><td><pre> <span class="token operator">*</span> @author xunguang <span class="token punctuation">(</span>xunguang@black<span class="token operator">-</span>skyline<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre> <span class="token operator">*</span> @brief </pre></td></tr><tr><td data-num="26"></td><td><pre> <span class="token operator">*</span> @version <span class="token number">0.1</span></pre></td></tr><tr><td data-num="27"></td><td><pre> <span class="token operator">*</span> @date <span class="token number">2022</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">31</span></pre></td></tr><tr><td data-num="28"></td><td><pre> <span class="token operator">*</span> @parameter</pre></td></tr><tr><td data-num="29"></td><td><pre> <span class="token operator">*</span> @copyright Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2022</span></pre></td></tr><tr><td data-num="30"></td><td><pre> <span class="token operator">*</span> </pre></td></tr><tr><td data-num="31"></td><td><pre> <span class="token operator">*</span><span class="token operator">/</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    </pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">from</span> mod <span class="token keyword">import</span> beautiful</pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    beautiful<span class="token punctuation">(</span><span class="token string">'python'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="level-3"><a class="anchor" href="#level-3">#</a> level 3</h1><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">from</span> fake_useragent <span class="token keyword">import</span> UserAgent</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> datetime <span class="token keyword">as</span> dt</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">import</span> re</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">import</span> requests</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>url <span class="token operator">=</span> <span class="token string">"http://t.weather.sojson.com/api/weather/city/101040100"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>url_2 <span class="token operator">=</span> <span class="token string">"http://www.weather.com.cn/weather/101040100.shtml"</span></pre></td></tr><tr><td data-num="8"></td><td><pre>headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"User-Agent"</span><span class="token punctuation">:</span> UserAgent<span class="token punctuation">(</span>verify_ssl<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>random<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token triple-quoted-string string">"""</span></pre></td></tr><tr><td data-num="12"></td><td><pre>1.爬网页写</pre></td></tr><tr><td data-num="13"></td><td><pre>"""</pre></td></tr><tr><td data-num="14"></td><td><pre>response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url_2<span class="token punctuation">,</span> headers<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>response<span class="token punctuation">.</span>encoding <span class="token operator">=</span> response<span class="token punctuation">.</span>apparent_encoding  <span class="token comment"># response.encoding = 'utf-8'</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">def</span> <span class="token function">RegularMatching</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment"># name_format = re.compile(r" ")</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    date_format <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r"&lt;h1>([0-9]+?.*?)&lt;/h1>"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    weather_format <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'class="wea">(.*?)&lt;/p'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    top_tem_format <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r"&lt;span>([0-9]+?)&lt;/span>"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    low_tem_format <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r"&lt;i>([0-9]+?).&lt;/i>"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    PrintResult<span class="token punctuation">(</span>date_format<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    PrintResult<span class="token punctuation">(</span>weather_format<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    PrintResult<span class="token punctuation">(</span>low_tem_format<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">,</span> top_tem_format<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    Tips<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">def</span> <span class="token function">PrintResult</span><span class="token punctuation">(</span>list_1<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> list_2<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">if</span> list_2 <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%-10s\t"</span> <span class="token operator">%</span> list_1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">else</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_1<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_1<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_2<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="38"></td><td><pre>            string <span class="token operator">=</span> <span class="token string">"&#123;0&#125;°C ~ &#123;1&#125;°C"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>list_1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> list_2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="39"></td><td><pre>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"%-12s\t"</span> <span class="token operator">%</span> string<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">def</span> <span class="token function">Tips</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    tip_format <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r"&lt;i>([0-9]&#123;4&#125;[-].*?)&lt;/i>"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    tip_form <span class="token operator">=</span> <span class="token string">"数据来源:中央气象台"</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n"</span> <span class="token operator">+</span> tip_form <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">,</span> tip_format<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    now_time <span class="token operator">=</span> dt<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%F %T"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"当前时间: "</span><span class="token punctuation">,</span> now_time<span class="token punctuation">,</span> <span class="token string">"\n"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>RegularMatching<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token triple-quoted-string string">"""</span></pre></td></tr><tr><td data-num="56"></td><td><pre>2.调用api写</pre></td></tr><tr><td data-num="57"></td><td><pre>"""</pre></td></tr><tr><td data-num="58"></td><td><pre>response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token keyword">for</span> index <span class="token keyword">in</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">:</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    date <span class="token operator">=</span> index<span class="token punctuation">[</span><span class="token string">"ymd"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    tag <span class="token operator">=</span> index<span class="token punctuation">[</span><span class="token string">"week"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    top_temper <span class="token operator">=</span> <span class="token string">"最"</span> <span class="token operator">+</span> index<span class="token punctuation">[</span><span class="token string">"high"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    low_temper <span class="token operator">=</span> <span class="token string">"最"</span> <span class="token operator">+</span> index<span class="token punctuation">[</span><span class="token string">"low"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token builtin">type</span> <span class="token operator">=</span> index<span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    sunrise_time <span class="token operator">=</span> <span class="token string">"预计日出时间"</span> <span class="token operator">+</span> index<span class="token punctuation">[</span><span class="token string">"sunrise"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    sunset_time <span class="token operator">=</span> <span class="token string">"预计日落时间"</span> <span class="token operator">+</span> index<span class="token punctuation">[</span><span class="token string">"sunset"</span><span class="token punctuation">]</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    info <span class="token operator">=</span> <span class="token string">"&#123;0:&lt;&#125;——&#123;1:&lt;&#125;:\t&#123;4:&lt;&#125;\n&#123;2:&lt;&#125;\t&#123;3:&lt;&#125;\n&#123;5:&lt;&#125;\t&#123;6:&lt;&#125;\n"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span></pre></td></tr><tr><td data-num="68"></td><td><pre>        date<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> top_temper<span class="token punctuation">,</span> low_temper<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">,</span> sunrise_time<span class="token punctuation">,</span> sunset_time</pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token punctuation">)</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token keyword">print</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span></pre></td></tr></table></figure><h1 id="level-4基于github上的stable-diffusion-web-ui-开源项目的图片生成windows系统"><a class="anchor" href="#level-4基于github上的stable-diffusion-web-ui-开源项目的图片生成windows系统">#</a> level 4—— 基于 GitHub 上的 Stable Diffusion web UI 开源项目的图片生成（Windows 系统）</h1><blockquote><h4 id="写在前面的话"><a class="anchor" href="#写在前面的话">#</a> 写在前面的话：</h4><p>先说些悲伤的事 —— 咱家是 AMD 核显，No NVIDIA 显卡（矿老板、黄牛贩子、皮衣黄 Fxxk you・・・），so CUDA 应该是不行了（不过可以用一些其他手段搞到一个能用的 NV 驱动看能不能欺骗一下 CUDA），现在只能试试看 pytorch-cpu 能不能跑 Stable Diffusion web UI 的 AI 算法模型・・・</p><h3 id="应需求对原来的代码命令行的启动启动方式作出一些优化并给出点击自动启动的方式配置对应不同的配置过程"><a class="anchor" href="#应需求对原来的代码命令行的启动启动方式作出一些优化并给出点击自动启动的方式配置对应不同的配置过程">#</a> 应需求对原来的 “代码 + 命令行” 的启动启动方式作出一些优化，并给出点击自动启动的方式配置：（对应不同的配置过程）</h3><h2 id="方式一代码命令行的启动默认已有git"><a class="anchor" href="#方式一代码命令行的启动默认已有git">#</a> 方式一：“代码 + 命令行” 的启动（默认已有 git）</h2><h2 id="方式二点击启动默认已有python3环境和git"><a class="anchor" href="#方式二点击启动默认已有python3环境和git">#</a> 方式二：点击启动（默认已有 python3 环境和 git）</h2></blockquote><h1 id="方式一配置过程"><a class="anchor" href="#方式一配置过程">#</a> 方式一配置过程：</h1><h2 id="一-为ai深度学习准备的环境配置默认已有python3环境"><a class="anchor" href="#一-为ai深度学习准备的环境配置默认已有python3环境">#</a> 一、为 AI 深度学习准备的环境配置 —— 默认已有 python3 环境</h2><h3 id="可选择安装anacondapython的包管理和环境管理器"><a class="anchor" href="#可选择安装anacondapython的包管理和环境管理器">#</a> （<em>可选择安装</em>）Anaconda——python 的包管理和环境管理器</h3><blockquote><h4 id="注安装使用anaconda就默认使用方式一代码命令行进行启动"><a class="anchor" href="#注安装使用anaconda就默认使用方式一代码命令行进行启动">#</a> 注：安装使用 Anaconda 就默认使用方式一：“代码 + 命令行” 进行启动</h4></blockquote><h4 id="q为什么要安这个觉得不需要可以不安"><a class="anchor" href="#q为什么要安这个觉得不需要可以不安">#</a> Q：为什么要安这个？（觉得不需要可以不安）</h4><h4 id="a方便配置py的虚拟编译环境降低python各种库的试错成本和学习尝试风险"><a class="anchor" href="#a方便配置py的虚拟编译环境降低python各种库的试错成本和学习尝试风险">#</a> A：方便配置 py 的虚拟编译环境，<strong>降低</strong> python 各种库的<strong>试错成本</strong>和学习尝试风险</h4><h4 id="q怎么安"><a class="anchor" href="#q怎么安">#</a> Q：怎么安？</h4><h5 id="a官网anaconda-anaconda-distribution下载安装太慢啦或国内镜像软件源下载安装快例如清华的镜像站index-of-anacondaarchive-清华大学开源软件镜像站-tsinghua-open-source-mirror"><a class="anchor" href="#a官网anaconda-anaconda-distribution下载安装太慢啦或国内镜像软件源下载安装快例如清华的镜像站index-of-anacondaarchive-清华大学开源软件镜像站-tsinghua-open-source-mirror">#</a> A：[官网](<span class="exturl" data-url="aHR0cHM6Ly93d3cuYW5hY29uZGEuY29tL3Byb2R1Y3RzLw==">Anaconda | Anaconda Distribution</span>) 下载安装（太慢啦）或国内镜像软件源下载安装（快）例如 [清华的镜像站](<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2FuYWNvbmRhL2FyY2hpdmUv">Index of /anaconda/archive/ | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</span>)</h5><h5 id="注"><a class="anchor" href="#注">#</a> 注：</h5><ul><li><h6 id="官网下载点击之后可能会跳转订阅注册页面此时需要-鼠标右击下载按钮选择在新标签页中打开就可以直接下载了"><a class="anchor" href="#官网下载点击之后可能会跳转订阅注册页面此时需要-鼠标右击下载按钮选择在新标签页中打开就可以直接下载了">#</a> 官网下载点击之后可能会跳转订阅注册页面，此时需要 鼠标右击下载按钮 —&gt; 选择在新标签页中打开就可以直接下载了</h6></li><li><h6 id="在镜像站下载要注意版本问题一般根据不同项的名称和上传时间确认"><a class="anchor" href="#在镜像站下载要注意版本问题一般根据不同项的名称和上传时间确认">#</a> 在镜像站下载要注意版本问题，一般根据不同项的名称和上传时间确认</h6></li><li><h6 id="本人选择的是anaconda3-202210-windows-x86_64exe-可执行安装程序"><a class="anchor" href="#本人选择的是anaconda3-202210-windows-x86_64exe-可执行安装程序">#</a> 本人选择的是 Anaconda3-2022.10-Windows-x86_64.exe (可执行安装程序)</h6></li><li><h6 id="安装时记住安装的位置最好不要放c盘"><a class="anchor" href="#安装时记住安装的位置最好不要放c盘">#</a> 安装时记住安装的位置，最好不要放 C 盘</h6></li><li><h6 id="安装时最好勾选上自动把anaconda添加进path系统环境变量里"><a class="anchor" href="#安装时最好勾选上自动把anaconda添加进path系统环境变量里">#</a> 安装时最好勾选上自动把 anaconda 添加进 PATH（系统环境变量）里</h6></li><li><h6 id="安装完成后在cmd里输入conda-list-检查安装是否成功"><a class="anchor" href="#安装完成后在cmd里输入conda-list-检查安装是否成功">#</a> 安装完成后在 cmd 里输入 <code>conda list</code> 检查安装是否成功</h6></li></ul><h6 id="另外安装好anaconda后我们可以搭建一个简单的-非系统path下的py编译环境"><a class="anchor" href="#另外安装好anaconda后我们可以搭建一个简单的-非系统path下的py编译环境">#</a> 另外，安装好 anaconda 后，我们可以搭建一个简单的、非系统 PATH 下的 py 编译环境：</h6><ol><li><p>先对 Anaconda 进行换源，具体详见<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvYW5hY29uZGEv"> anaconda | 镜像站使用帮助 | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</span>（换源就是换一个下载来源，这里我们换的那几个都是国内有名的源，完全是免费的）</p><h6 id="ps建议能换就换不然默认的源是国外网址下东西慢还不稳定稍微下个大点的东西就超时报错"><a class="anchor" href="#ps建议能换就换不然默认的源是国外网址下东西慢还不稳定稍微下个大点的东西就超时报错">#</a> PS：建议能换就换，不然默认的源是国外网址（下东西慢还不稳定，稍微下个大点的东西就超时报错・・・）</h6></li><li><p>打开<strong> cmd</strong> 窗口或者 “<strong>Anaconda Prompt</strong>” 程序或者 “<strong>Anaconda Powershell Prompt</strong>” 程序（</p></li><li><p>使用 “ <code>conda create -n 环境名 python=版本号 -y</code> ” 格式的命令新建一个 py 编译环境，例如：使用</p><p><code>conda create -n pytorch_env python=3.10.6 -y</code> （做演示用），</p><p><code>conda create -n novelai python=3.10.6 -y</code> （等下在这个环境里操作）,</p><p>在创建过程中遇到问 y/n 输入 y 即可</p><blockquote><h6 id="注python版本最好是3106或大于这个版本号因为项目的建议就是3106"><a class="anchor" href="#注python版本最好是3106或大于这个版本号因为项目的建议就是3106">#</a> 注：python 版本最好是 3.10.6 或大于这个版本号，因为项目的建议就是 3.10.6</h6></blockquote></li><li><p>创建完成后，输入命令 <code>conda env list</code> ，显示现有的环境（前面是新建时取的环境名字，后面是环境所在文件路径，base 是默认自带的）：</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>D:\Program\Anaconda\my_envs>conda env list</pre></td></tr><tr><td data-num="2"></td><td><pre># conda environments:</pre></td></tr><tr><td data-num="3"></td><td><pre>#</pre></td></tr><tr><td data-num="4"></td><td><pre>base                     D:\Program\Anaconda</pre></td></tr><tr><td data-num="5"></td><td><pre>novelai                  D:\Program\Anaconda\envs\novelai</pre></td></tr><tr><td data-num="6"></td><td><pre>pytorch_env              D:\Program\Anaconda\envs\pytorch_env</pre></td></tr></table></figure><blockquote><h6 id="注自己创建的非base的环境的文件夹都会统一放在anaconda文件夹里的envs文件夹内"><a class="anchor" href="#注自己创建的非base的环境的文件夹都会统一放在anaconda文件夹里的envs文件夹内">#</a> 注：自己创建的非 base 的环境的文件夹，都会统一放在 Anaconda 文件夹里的 envs 文件夹内</h6></blockquote></li><li><p>在这里提前<strong>给 pip 换源</strong>，不然之后在下载东西时会体验到什么是折磨・・・</p><p>首先激活 novelai 环境（在这个环境里安装依赖）：</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>conda activate novelai</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>// 激活成功后显示：</pre></td></tr><tr><td data-num="5"></td><td><pre>(novelai) 当前目录></pre></td></tr></table></figure><p>然后直接粘贴下面的命令给 pip 换源（换的是清华源，pip 暂时不要用阿里源，因为更新缓慢・・・）</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</pre></td></tr></table></figure></li></ol><h3 id="必安pytorch"><a class="anchor" href="#必安pytorch">#</a> （<em>必安</em>）Pytorch</h3><blockquote><h4 id="注pytorch是这个项目能跑起来的必要依赖库之一理论上可以等下和其他依赖库一起安装但是在那个时候安装的pytorch不一定是cpu版核显佬的哭泣所以建议提前安装好cpu版的"><a class="anchor" href="#注pytorch是这个项目能跑起来的必要依赖库之一理论上可以等下和其他依赖库一起安装但是在那个时候安装的pytorch不一定是cpu版核显佬的哭泣所以建议提前安装好cpu版的">#</a> 注：pytorch 是这个项目能跑起来的必要依赖库之一，理论上可以等下和其他依赖库一起安装，但是在那个时候安装的 Pytorch 不一定是 CPU 版（核显佬的哭泣・・・），所以建议提前安装好 CPU 版的</h4></blockquote><h4 id="获取安装命令"><a class="anchor" href="#获取安装命令">#</a> 获取安装命令</h4><p>这个玩意通过命令行安装，，具体命令可以百度看博客，也可以直接到 [官网](<span class="exturl" data-url="aHR0cHM6Ly9weXRvcmNoLm9yZy9nZXQtc3RhcnRlZC9sb2NhbGx5Lw==">Start Locally | PyTorch</span>) 根据个人使用平台查看最新安装命令（到官网后，进入”Get Started“下，下拉到如下图的 page 页面并根据个人平台选择）<img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211012107230.png" alt="image-20221101210752130">,</p><ol><li>上图第一行”<strong>PyTorch Build</strong>“的三个选项分别是 Stable（<em><strong>稳定版</strong></em>）、Preview（<em><strong>先行测试版</strong></em>）、LTS（<em><strong>长期支持版</strong></em>），选择第一个和第三个都无所谓，但不推荐选第二个</li><li>上图第二行”<strong>Your OS</strong>“选择本机操作系统就行</li><li>上图第三行”<strong>Package</strong>“，选择用那个包管理工具（平台）进行安装，分别是 Conda（<em><strong>Anaconda 命令行包安装工具</strong></em>）、Pip（<em><strong>Python 自带的包安装工具</strong></em>）、LibTorch（不知道，<em><strong>应该和 Torch 本身的安装工具有关</strong></em>）、Source（直接在 github 上下载 pytorch 的代码，然后自己 setup，<strong>小白别用</strong>）</li><li>上图第四行”<strong>Language</strong>“，选 python，毕竟除了某些特殊群体，一般没谁会傻到用 Java 跑 AI 深度学习吧・・・</li><li>上图第五行”<strong>Computer Platform</strong>“，选择用什么编程算法软件跑，<strong>前两个 CUDA 项</strong>是皮衣黄家的显卡可以使用的平台软件版本（Windows、Linux、Mac 都可以下载到 CUDA，但老黄对 Linux 的驱动支持那可真是一绝啊～滑稽），<strong>第三个项 ROCm</strong> 是 AMD 为了”<em><strong> 对标</strong></em> “CUDA 出的一个机器学习库，但由于各种原因，** 只能在 Linux 上跑，** 而且问题比较多，支持的型号比较少（有得用就不错了），<strong>最后一个 CPU 项</strong>，顾名思义，就是给我这样的倒霉蛋用的让 cpu 来跑机器学习的选择，比较欣慰的是，前三项要匹配库与 pytorch 的版本，但 CPU 项不需要（还算一点安慰）</li><li>上图最后一行，根据前面的做出选择给出的最新下载命令，直接 cv 到 上面选择的 Package 对应的工具里下载</li></ol><h4 id="进行安装"><a class="anchor" href="#进行安装">#</a> 进行安装</h4><h5 id="用pip安装"><a class="anchor" href="#用pip安装">#</a> 用 pip 安装</h5><p>总的来说，通过 pip 安装最简单，直接随便找个命令行把下面的命令输入在上面，然后回车就行</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>pip3 install torch torchvision torchaudio</pre></td></tr></table></figure><h5 id="用conda安装"><a class="anchor" href="#用conda安装">#</a> 用 conda 安装</h5><p>为了降低试错风险，方便包管理，使用<strong> Anaconda Prompt 命令行</strong>进入在 Anaconda 里创建的自定义环境来安装 pytorch：</p><ol><li><p>进入<strong> Anaconda Prompt</strong> 程序，（<strong>不是 cmd</strong>），然后进入提前准备好的 py 环境（最好是 python 3.10.6），（没有就建一个： <code>conda create -n novelai python==3.10.6</code> ）, 在命令行里输入 <code>conda activate novelai</code> ，出现如下提示则表示激活成功：（完成激活后再进行下一步）</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>(novelai) D:\Program\Anaconda\my_envs></pre></td></tr></table></figure><blockquote><h6 id="其中novelai-是py环境名后面是工作目录这里的这个功罪目录随意"><a class="anchor" href="#其中novelai-是py环境名后面是工作目录这里的这个功罪目录随意">#</a> 其中， <code>(novelai)</code> 是 py 环境名，后面是工作目录 (这里的这个功罪目录随意)，</h6></blockquote></li><li><p>把 pytorch 官网使用 conda 下载的命令粘贴进 Anaconda Prompt 已经激活完成的 python 3.10.6 环境里：</p><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211020044891.png" alt="image-20221102004450723"></p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>conda install pytorch torchvision torchaudio cpuonly</pre></td></tr></table></figure><p>回车后等待安装相关依赖和包，有问<strong> y/n</strong> 的一律选 y</p></li><li><p>等待安装完成后，输入 <code>python</code> 进入交互模式，在该模式下依次输入：</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> torch</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span></pre></td></tr></table></figure><p>若最后的效果图呈现如下，则表示成功：（否则重新执行第 2 步 pytorch 的下载）</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span>novelai<span class="token punctuation">)</span> D<span class="token punctuation">:</span>\Program\Anaconda\my_envs<span class="token operator">></span>python</pre></td></tr><tr><td data-num="2"></td><td><pre>Python <span class="token number">3.10</span><span class="token number">.6</span> <span class="token operator">|</span> packaged by conda<span class="token operator">-</span>forge <span class="token operator">|</span> <span class="token punctuation">(</span>main<span class="token punctuation">,</span> Oct <span class="token number">24</span> <span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">02</span><span class="token punctuation">:</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>MSC v<span class="token punctuation">.</span><span class="token number">1916</span> <span class="token number">64</span> bit <span class="token punctuation">(</span>AMD64<span class="token punctuation">)</span><span class="token punctuation">]</span> on win32</pre></td></tr><tr><td data-num="3"></td><td><pre>Type <span class="token string">"help"</span><span class="token punctuation">,</span> <span class="token string">"copyright"</span><span class="token punctuation">,</span> <span class="token string">"credits"</span> <span class="token keyword">or</span> <span class="token string">"license"</span> <span class="token keyword">for</span> more information<span class="token punctuation">.</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">import</span> torch</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token number">1.13</span><span class="token number">.0</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token operator">>></span><span class="token operator">></span></pre></td></tr></table></figure></li></ol><h2 id="二-开始stable-diffusion-web-ui项目文件的配置"><a class="anchor" href="#二-开始stable-diffusion-web-ui项目文件的配置">#</a> 二、开始 Stable Diffusion web UI 项目文件的配置</h2><ol><li><h5 id="下载novalai模型训练文件点击此处-文件很大大大"><a class="anchor" href="#下载novalai模型训练文件点击此处-文件很大大大">#</a> 下载 NovalAI<span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMUJKLTVabzdGbkN4aDdlekp0WUVxSWc/cHdkPWphY2s="> 模型训练文件 (点击此处)</span> (文件很大大大・・・・・・)</h5></li><li><h5 id="获取stable-diffusion-web-ui项目源代码"><a class="anchor" href="#获取stable-diffusion-web-ui项目源代码">#</a> 获取 Stable Diffusion web UI 项目源代码</h5><ul><li><p>可以直接进入 GitHub 里的项目地址直接下载一份源文件的 zip 压缩包并解压到<strong>存放项目文件的文件夹</strong>，项目地址 <code>https://github.com/AUTOMATIC1111/stable-diffusion-webui</code></p></li><li><p>（<strong>默认有 git 并且 git 已配置完成</strong>）也可以直接在存放代码的文件夹里打开 git 命令行，输入命令：</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui</pre></td></tr></table></figure><p>上面是直接和 GitHub 服务器建立连接从 GitHub 处下载文件，简单来讲，如果暂时登不上、进不去 GitHub 且又没有 “科学魔法” 且又没有 dev-sidecar，那就用下面这个命令：</p><p>（原理是在<strong> url</strong> 之前添上了 &quot;<strong><span class="exturl" data-url="aHR0cDovL2dpdGNsb25lLmNvbS8=">gitclone.com/</span></strong>&quot;，这个技巧对热门 GitHub 资源都有效）</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>git clone https://gitclone.com/github.com/AUTOMATIC1111/stable-diffusion-webui.git</pre></td></tr></table></figure><p>然后，当前文件夹会创建一个与项目同名的文件夹 <code>stable-diffusion-webui</code> 并将下载完成的源文件都存入该文件夹内</p></li></ul></li><li><h5 id="将下载的novalai模型训练文件压缩包里的stable-diffusionrar解压到项目源代码文件夹stable-diffusion-webui里的对应位置"><a class="anchor" href="#将下载的novalai模型训练文件压缩包里的stable-diffusionrar解压到项目源代码文件夹stable-diffusion-webui里的对应位置">#</a> 将下载的 NovalAI 模型训练文件压缩包里的 <code>Stable-diffusion.rar</code> 解压到项目源代码文件夹 <code>stable-diffusion-webui</code> 里的对应位置:</h5><p><code>···\stable-diffusion-webui\models\</code> ，并替换同名文件，完成后删除此处的压缩包</p><ul><li><p>还是进入<strong> Anaconda Prompt 程序</strong>，激活到 novelai 的 py 环境： <code>conda activate novelai</code> ，cd 到该项目的根目录下，安装第三方依赖库：</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>python -m pip install -r requirements.txt</pre></td></tr></table></figure><p>下载的东西有点多，而且网络有波动可能会下载失败，（pip 如果没换源下载得又慢问题又多）（提示标红出错后，记得把上面的命令多试几次），成功以后<strong>不要退出 Anaconda Prompt 程序</strong>，</p></li><li><p>上一步完成后还需要安装一个插件库 deepdanbooru，用来给 AI 跑图训练时提取信息，特别是使用别人自制的训练模型时：</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>"""</pre></td></tr><tr><td data-num="2"></td><td><pre>本人选择用pip进行下载，首先检查pip的更新</pre></td></tr><tr><td data-num="3"></td><td><pre>"""</pre></td></tr><tr><td data-num="4"></td><td><pre>python -m pip install --upgrade pip</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>"""</pre></td></tr><tr><td data-num="8"></td><td><pre>然后是下载这个插件库，这里因为当时在下面修改launch.py文件时出了一些问题，就直接从报错里提取的这个插件库的绝对地址进行下载</pre></td></tr><tr><td data-num="9"></td><td><pre>"""</pre></td></tr><tr><td data-num="10"></td><td><pre>python -m pip install git+https://github.com/KichangKim/DeepDanbooru.git@d91a2963bf87c6a770d74894667e9ffa9f6de7ff#egg=deepdanbooru[tensorflow] tensorflow==2.10.0 tensorflow-io==0.27.0 --prefer-binary</pre></td></tr></table></figure><blockquote><h4 id="不过通过上面的代码安装有个缺点就是不能及时得到自动更新所以建议可以先不下载这个库等到最后进行命令运行时会自动检测下载这个库"><a class="anchor" href="#不过通过上面的代码安装有个缺点就是不能及时得到自动更新所以建议可以先不下载这个库等到最后进行命令运行时会自动检测下载这个库">#</a> 不过通过上面的代码安装有个缺点，就是不能及时得到自动更新，所以 —— 建议可以先不下载这个库，等到最后进行命令运行时，会自动检测下载这个库</h4></blockquote><p>到此<strong>基础配置阶段已经大体完成</strong>。</p></li></ul></li><li><h4 id="最重要的一步修改项目根目录下的launchpy文件重点"><a class="anchor" href="#最重要的一步修改项目根目录下的launchpy文件重点">#</a> 最重要的一步，修改项目根目录下的 launch.py 文件（重点）</h4><p>给原本的代码添加 (命令行)<strong> 参数</strong>:</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>commandline_args <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'COMMANDLINE_ARGS'</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>改为：（跳过 cuda 检测，即启用 CPU 计算模式）</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>commandline_args <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'COMMANDLINE_ARGS'</span><span class="token punctuation">,</span> <span class="token string">"--skip-torch-cuda-test"</span><span class="token punctuation">)</span></pre></td></tr></table></figure></li></ol><h2 id="三-开始run项目测试一下本地算法部署"><a class="anchor" href="#三-开始run项目测试一下本地算法部署">#</a> 三、开始 run 项目测试一下（本地算法部署）</h2><ol><li><h5 id="延续上一步操作激活novelai的py环境然后cd-到该项目的根目录下完成后命令行里显示如下"><a class="anchor" href="#延续上一步操作激活novelai的py环境然后cd-到该项目的根目录下完成后命令行里显示如下">#</a> 延续上一步操作，激活 novelai 的 py 环境，然后 cd 到该项目的根目录下，完成后命令行里显示如下：</h5><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>(novelai) D:\CodeBases\stable-diffusion-webui></pre></td></tr></table></figure><p>输入命令：（<strong>run 项目的命令</strong>）</p><p><code>python launch.py --precision full --no-half --deepdanbooru --use-cpu all</code></p><p>或（一般下面这个没用）：</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>python launch.py --precision full --no-half --deepdanbooru --use-cpu all sd interrogate gfpgan bsrgan esrgan scunet codeformer</pre></td></tr></table></figure><p>等待，</p><ul><li>若在上面没有下载<strong> deepdanbooru</strong> 库，则会在自检时先下载这个库，但有可能会下载超时报错，若这样，请多次重试，或在报错信息中提取网址，并将其加在 <code>python -m pip install</code> 的后面执行；</li><li>然后再 run 项目</li><li>若之前步骤的都没问题，<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXVnNDExODc5Vy8/aXNfc3RvcnlfaDU9ZmFsc2UmYW1wO3A9MSZhbXA7c2hhcmVfZnJvbT11Z2MmYW1wO3NoYXJlX21lZGl1bT1hbmRyb2lkJmFtcDtzaGFyZV9wbGF0PWFuZHJvaWQmYW1wO3NoYXJlX3Nlc3Npb25faWQ9Y2UxOTQxNWQtMGZjMy00YTBlLWJmMjctNTg3ZWM5NWNlMmEzJmFtcDtzaGFyZV9zb3VyY2U9UVEmYW1wO3NoYXJlX3RhZz1zX2kmYW1wO3RpbWVzdGFtcD0xNjY3NDA2MDk5JmFtcDt1bmlxdWVfaz1tRk1Nbmhy">请参照此处（点击进入）</span></li></ul><p>（第一次部署大概 20-40 分钟不等），成功后如下图：</p><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211021953095.png" alt="image-20221102195350865"></p></li><li><h5 id="上图倒数第二行给出了本地url这是开启成功的标志"><a class="anchor" href="#上图倒数第二行给出了本地url这是开启成功的标志">#</a> 上图倒数第二行给出了本地 URL，这是开启成功的标志，</h5><p>但<strong>不要关闭</strong>这个命令行，<strong>因为它才是完成接下来一些列操作的本体</strong></p><p>将其复制后在浏览器中粘贴进入（page 页面如下）：</p><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211021956138.png" alt="image-20221102195658059"></p></li><li><h5 id="开始配置图片的生成要素进行效果测试在txt2img标签下操作"><a class="anchor" href="#开始配置图片的生成要素进行效果测试在txt2img标签下操作">#</a> 开始配置图片的生成要素，进行效果测试（在<strong> txt2img</strong> 标签下操作）</h5><h4 id="注cpu算力珍贵且用且珍惜"><a class="anchor" href="#注cpu算力珍贵且用且珍惜">#</a> 注：CPU 算力珍贵，且用且珍惜</h4><ul><li><p><strong>Prompt</strong>：这一行设置希望 AI 生成的画作中包含的 “<strong>元素</strong>”，用英文词汇描述，例如可以输入：</p><pre><code>masterpiece, best quality,obliques , 1girl, magic, vivid, looking at viewer, from above, black hair, black eyes, floating, flowing dress, &#123;&#123;&#123;&#123;intricate red dress&#125;&#125;&#125;&#125;, hibiscus flowers, d:, cleavage

用&#123;&#125;引用起来的词汇元素表示很看重（相比于其他词权重更大），上面这一段翻译下就是：

杰作，最佳质量，斜肌，1个女孩，魔法，生动，从上面看观众，黑发，黑眼睛，漂浮，飘逸的裙子，&#123;&#123;&#123;复杂的红色连衣裙&#125;&#125;&#125;，芙蓉花，d:，乳沟
</code></pre><p>当然，毕竟 CPU 算图得慢，所以核显佬不要随便就找些关键词扔上去，不然花了时间也没得到想要的图，心里也不爽・・・</p><pre><code>我的Prompt关键词：

&#123;&#123;ultraman, arm blade, shoulder armor&#125;&#125;, &#123;&#123;&#123;&#123;warrior of light, X crystal breastplate, eye of light , bloody ruins | ruins background&#125;&#125;&#125;&#125;, silver stripes | white stripes, mechanical sense, in battle,  unyielding sense, hope,
</code></pre><h6 id="一些可用的关键词记录"><a class="anchor" href="#一些可用的关键词记录">#</a> 一些可用的<span class="exturl" data-url="aHR0cHM6Ly93d3cueXVxdWUuY29tL2xvbmd5dXllL2xtZ2N3eS9ncmRpM2I=">关键词记录</span></h6></li><li><p><strong>Negative prompt</strong> ：和上面相反，设置<strong>不希望</strong>在 AI 生成的画作中包含的 “<strong>元素</strong>”，这个一般是通用的（毕竟人的 xp 可能千奇百怪，但列举大部分人都不喜欢的东西还是很容易的，另外，记得在这里防范下奇奇怪怪的克苏鲁元素，防止精神污染，比如：“奇怪的触手” 之类的）</p><pre><code>strange tentacles, lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry,
</code></pre></li><li><p><strong>Sampling Steps（采样步长）</strong>：简单地理解为迭代次数，越大越耗时，一般 20 左右就足够了，太大提升也有限，（有细致需求 30 也行，不过核显是不要想了・・・太大简直跑到想爆炸）。</p></li><li><p><strong>Sampling method（采样方法）</strong>：简单地理解为迭代算法，感觉 Euler 和 DDIM（Novel 特色）就不错，不同算法适合的迭代次数不尽相同。</p><p><strong>（注：DDIM（Novel 特色）只能用 Nvidia 显卡的 cuda 来跑，核显可以选择 Euler 或 Euler a）</strong></p></li><li><p><strong>Width、Height</strong>：控制图像大小，设备性能差就不要妄想开太大，而且这个项目也不适合生成太大的・・・（512 就挺好）</p></li><li><p><strong>Batch count（连续生成次数）、Batch size（每次生成张数）</strong>：控制每次任务的出图数量，Batch size 太大爆显存，CPU 算的话似乎用的是内存（核显佬唯一有优势的地方・・・但 8g 以下不要想着多生成了・・・）</p></li><li><p><strong>CFG Scale（参数制约度）</strong>：简单地讲，AI 的听话程度，越大越听话（遵照 Prompt、Negative prompt），越小越 “放荡不羁爱自由”</p></li><li><p><strong>Seed</strong>：就是随机种子，可以指定，-1 就是随机种子。</p></li></ul></li><li><h5 id="开始生成"><a class="anchor" href="#开始生成">#</a> 开始生成:</h5><p>完成上面的图片生成参数设置后，点击右上角的<strong> Generate</strong> 开始生成，这时 Generate 的按钮下方会出现一个蓝色进度条，此时 CPU（GPU）就开始工作了，（如果没有蓝色进度条或一闪而过，就表示当前跑不起来，这时就要检查各项配置了），耐心等待图片的生成：（图有点丑，毕竟刚开始用没经验）</p><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211030005626.png" alt="image-20221103000544258"></p><p>下面是按照其他人的案例配置生成的效果图：（我还改了一下的・・・狗头保命）</p><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211030020800.png" alt="00002-815804347-masterpiece, best quality,obliques , 1girl, magic, vivid, looking at viewer, from above, black hair, black eyes, floating, flowi"></p></li></ol><h2 id="四-可做添加点击即run项目的设置"><a class="anchor" href="#四-可做添加点击即run项目的设置">#</a> 四、（可做）添加点击即 run 项目的设置</h2><h5 id="简单地讲很麻烦"><a class="anchor" href="#简单地讲很麻烦">#</a> 简单地讲，很麻烦。</h5><ul><li><h6 id="如果一开始就弄的是命令行运行现在想转点击即run那我建议直接重开重新按照方式二建立一个项目"><a class="anchor" href="#如果一开始就弄的是命令行运行现在想转点击即run那我建议直接重开重新按照方式二建立一个项目">#</a> 如果一开始就弄的是命令行运行，现在想转点击即 run，那我建议直接重开 —— 重新按照方式二建立一个项目</h6></li><li><h6 id="如果两种启动方式都想要建议由方式二的点击即run开始逐步添加命令行运行"><a class="anchor" href="#如果两种启动方式都想要建议由方式二的点击即run开始逐步添加命令行运行">#</a> 如果两种启动方式都想要，建议由方式二的点击即 run 开始，逐步添加命令行运行・・・</h6></li></ul><p>当然，本人也在探究一种邪门的方法・・・就是在方式一可以成功跑图之后（此时的依赖包全在所创建的非 path 的 py 环境里），从理论上讲，可以按照方式二中项目文件的配置流程重新配置一个项目文件，然后按照方式二的部署方式进行部署，这时因为依赖文件是齐全的，所以不需要重新下载依赖库（<strong>在理论上可行</strong>）</p><h1 id="方式二配置过程"><a class="anchor" href="#方式二配置过程">#</a> 方式二配置过程：</h1><h2 id="一-准备的环境配置默认已有python3环境"><a class="anchor" href="#一-准备的环境配置默认已有python3环境">#</a> 一、准备的环境配置 —— 默认已有 python3 环境</h2><h3 id="可选择安装anaconda"><a class="anchor" href="#可选择安装anaconda">#</a> （<em>可选择安装</em>）Anaconda</h3><blockquote><h4 id="anaconda安与不安可自行选择它们的区别就在于"><a class="anchor" href="#anaconda安与不安可自行选择它们的区别就在于">#</a> Anaconda 安与不安可自行选择，它们的区别就在于：</h4><h5 id="不安anaconda那之后大概几个g大小的一堆依赖库就会默认加装在本地path路径里的python环境里"><a class="anchor" href="#不安anaconda那之后大概几个g大小的一堆依赖库就会默认加装在本地path路径里的python环境里">#</a> 不安 anaconda，那之后大概几个 G 大小的一堆依赖库就会默认加装在本地 path 路径里的 python 环境里</h5><h6 id="安了anaconda这些依赖库被安在哪将由你自行决定且它们与本地path路径里的python环境是隔离的"><a class="anchor" href="#安了anaconda这些依赖库被安在哪将由你自行决定且它们与本地path路径里的python环境是隔离的">#</a> 安了 anaconda，这些依赖库被安在哪将由你自行决定，且它们与本地 path 路径里的 python 环境是隔离的</h6></blockquote><ul><li>选择安装，就去方式一那里把 Anaconda 的安装流程走一遍（包括<strong> anaconda 的换源，py 环境的新建，pip 的更新和换源</strong>），括号里的这<strong>三件事一定要完成</strong>，因为这关系到后面的实际安装体验</li><li>选择不安装，就确保本地的 python 最好要大于等于 3.10.6</li></ul><h3 id="可选择安装dev-sidecar强烈推荐"><a class="anchor" href="#可选择安装dev-sidecar强烈推荐">#</a> （<em>可选择安装</em>）dev-sidecar（强烈推荐）</h3><p>简单地说，除非你会”<strong> 科学上网</strong> “或者会”<strong> 神奇魔法</strong> “或者你有”<strong> 边车</strong> “，不然你在后面的初始化依赖库安装时，一定会受尽折磨・・・</p><p>说人话就是，你要么需要有能和 GitHub 建立稳定通信的方式，要么有着能加速 git clone 的手段；</p><p>对一般人而言，实现前者一般用 “<strong>边车</strong>”（dev-sidecar），后者的话，一般是找镜像网站或代理网站加速下载</p><h3 id="pytorch就后面的结果来看暂时不需要单独下载"><a class="anchor" href="#pytorch就后面的结果来看暂时不需要单独下载">#</a> Pytorch（就后面的结果来看，暂时不需要单独下载）</h3><h2 id="二-项目文件的配置部分参照方式一"><a class="anchor" href="#二-项目文件的配置部分参照方式一">#</a> 二、项目文件的配置 —— 部分参照方式一</h2><ol><li><h4 id="下载novalai模型训练文件同方式一"><a class="anchor" href="#下载novalai模型训练文件同方式一">#</a> 下载 NovalAI 模型训练文件 —— 同方式一</h4></li><li><h4 id="获取stable-diffusion-web-ui项目源代码同方式一"><a class="anchor" href="#获取stable-diffusion-web-ui项目源代码同方式一">#</a> 获取 Stable Diffusion web UI 项目源代码 —— 同方式一</h4></li><li><h4 id="仅需要novalai模型训练文件放置到项目的对应文件夹下"><a class="anchor" href="#仅需要novalai模型训练文件放置到项目的对应文件夹下">#</a> 仅需要 NovalAI 模型训练文件放置到项目的对应文件夹下，</h4><h4 id="即~stable-diffusion-webuimodelsstable-diffusion"><a class="anchor" href="#即~stable-diffusion-webuimodelsstable-diffusion">#</a> 即 <code>~\stable-diffusion-webui\models\Stable-diffusion</code></h4></li><li><h4 id="最重要的一步修改项目根目录下的launchpy文件重点和webui-userbat文件重点"><a class="anchor" href="#最重要的一步修改项目根目录下的launchpy文件重点和webui-userbat文件重点">#</a> 最重要的一步，修改项目根目录下的 launch.py 文件（重点）和 webui-user.bat 文件（重点）：</h4><ul><li><p>右键编辑该 launch.py 文件（建议用 VScode 这种代码编辑器打开，实在不行用记事本也可以），</p><p>然后 ctrl+F 全局查找含 <code>github</code> 的代码部分，发现共 11 个结果，需要更改的为中间的九个（如下图）：</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>gfpgan_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'GFPGAN_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">"git+https://github.com/TencentARC/GFPGAN.git@8d2447a2d918f8eba5a4a01463fd48e45126a379"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>clip_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CLIP_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">"git+https://github.com/openai/CLIP.git@d50d76daa670286dd6cacf3bcd80b5e4823fc8e1"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>deepdanbooru_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'DEEPDANBOORU_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">"git+https://github.com/KichangKim/DeepDanbooru.git@d91a2963bf87c6a770d74894667e9ffa9f6de7ff"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>xformers_windows_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'XFORMERS_WINDOWS_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">'https://github.com/C43H66N12O12S2/stable-diffusion-webui/releases/download/f/xformers-0.0.14.dev0-cp310-cp310-win_amd64.whl'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>stable_diffusion_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'STABLE_DIFFUSION_REPO'</span><span class="token punctuation">,</span> <span class="token string">"https://github.com/CompVis/stable-diffusion.git"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>taming_transformers_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'TAMING_REANSFORMERS_REPO'</span><span class="token punctuation">,</span> <span class="token string">"https://github.com/CompVis/taming-transformers.git"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>k_diffusion_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'K_DIFFUSION_REPO'</span><span class="token punctuation">,</span> <span class="token string">'https://github.com/crowsonkb/k-diffusion.git'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>codeformer_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CODEFORMET_REPO'</span><span class="token punctuation">,</span> <span class="token string">'https://github.com/sczhou/CodeFormer.git'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>blip_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'BLIP_REPO'</span><span class="token punctuation">,</span> <span class="token string">'https://github.com/salesforce/BLIP.git'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p><strong>改为如下</strong>：（为了加速下载的速度，原理可自行去百度 <code>https://ghproxy.com/</code> 和 <code>gitclone.com/</code> 有什么用）</p><figure class="highlight python"><figcaption data-lang="python"></figcaption><table><tr><td data-num="1"></td><td><pre>gfpgan_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'GFPGAN_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">"git+https://gitclone.com/github.com/TencentARC/GFPGAN.git@8d2447a2d918f8eba5a4a01463fd48e45126a379"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre>clip_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CLIP_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">"git+https://gitclone.com/github.com/openai/CLIP.git@d50d76daa670286dd6cacf3bcd80b5e4823fc8e1"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>deepdanbooru_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'DEEPDANBOORU_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">"git+https://ghproxy.com/https://github.com/KichangKim/DeepDanbooru.git@d91a2963bf87c6a770d74894667e9ffa9f6de7ff"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>xformers_windows_package <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'XFORMERS_WINDOWS_PACKAGE'</span><span class="token punctuation">,</span> <span class="token string">'https://gitclone.com/github.com/C43H66N12O12S2/stable-diffusion-webui/releases/download/f/xformers-0.0.14.dev0-cp310-cp310-win_amd64.whl'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>stable_diffusion_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'STABLE_DIFFUSION_REPO'</span><span class="token punctuation">,</span> <span class="token string">"https://gitclone.com/github.com/CompVis/stable-diffusion.git"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>taming_transformers_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'TAMING_REANSFORMERS_REPO'</span><span class="token punctuation">,</span> <span class="token string">"https://gitclone.com/github.com/CompVis/taming-transformers.git"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>k_diffusion_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'K_DIFFUSION_REPO'</span><span class="token punctuation">,</span> <span class="token string">'https://gitclone.com/github.com/crowsonkb/k-diffusion.git'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>codeformer_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'CODEFORMET_REPO'</span><span class="token punctuation">,</span> <span class="token string">'https://gitclone.com/github.com/sczhou/CodeFormer.git'</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>blip_repo <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'BLIP_REPO'</span><span class="token punctuation">,</span> <span class="token string">'https://gitclone.com/github.com/salesforce/BLIP.git'</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>改完后，<strong>保存退出</strong>；</p></li><li><p>右键编辑 webui-user.bat 文件，找到下面的这一行：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">set</span> <span class="token assign-left variable">COMMANDLINE_ARGS</span><span class="token operator">=</span></pre></td></tr></table></figure><p>在其后添加参数:</p><p><code>--skip-torch-cuda-test --precision full --no-half --deepdanbooru --use-cpu all</code></p><p>使其变成：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">set</span> <span class="token assign-left variable">COMMANDLINE_ARGS</span><span class="token operator">=</span> --skip-torch-cuda-test <span class="token parameter variable">--precision</span> full --no-half <span class="token parameter variable">--deepdanbooru</span> --use-cpu all</pre></td></tr></table></figure><p>改完后，<strong>保存退出</strong>；</p><blockquote><h2 id="注意"><a class="anchor" href="#注意">#</a> 注意：</h2><ul><li><h2 id="如果你想用anaconda控制那大概4个g左右依赖库的存储位置请一定不要在此时左键它或者使它运行"><a class="anchor" href="#如果你想用anaconda控制那大概4个g左右依赖库的存储位置请一定不要在此时左键它或者使它运行">#</a> 如果你想用 Anaconda 控制那大概 4 个 G 左右依赖库的存储位置，请”<strong> 一定不要</strong> “在此时左键它或者使它运行，</h2></li><li><h2 id="而需要在anaconda-prompt程序中新建好一个非系统path的python环境激活该环境后cd到项目根目录下这些操作参照方式一中相关内容然后再运行它"><a class="anchor" href="#而需要在anaconda-prompt程序中新建好一个非系统path的python环境激活该环境后cd到项目根目录下这些操作参照方式一中相关内容然后再运行它">#</a> 而需要在 Anaconda Prompt 程序中新建好一个非系统 path 的 python 环境，激活该环境后 cd 到项目根目录下（这些操作参照方式一中相关内容），然后再运行它</h2></li></ul></blockquote></li></ul></li></ol><h2 id="三-直接开始run项目开始第一次部署"><a class="anchor" href="#三-直接开始run项目开始第一次部署">#</a> 三、直接开始 run 项目开始第一次部署</h2><ul><li><h5 id="使用anaconda只要完成第一次部署后以后再次运行可以直接点击webui-userbat即运行"><a class="anchor" href="#使用anaconda只要完成第一次部署后以后再次运行可以直接点击webui-userbat即运行">#</a> 使用 Anaconda：（只要完成第一次部署后，以后再次运行可以直接点击 webui-user.bat 即运行）</h5><ul><li><h6 id="打开anaconda-prompt程序激活某个想存放依赖库的py环境"><a class="anchor" href="#打开anaconda-prompt程序激活某个想存放依赖库的py环境">#</a> 打开 Anaconda Prompt 程序，激活某个想存放依赖库的 py 环境，</h6></li><li><h6 id="cd到项目根目录下并输入命令webui-userbat然后回车"><a class="anchor" href="#cd到项目根目录下并输入命令webui-userbat然后回车">#</a> cd 到项目根目录下，并输入命令 <code>.\webui-user.bat</code> ，然后回车，</h6></li><li><h6 id="耐心等待遇到下载超时报错的情况再次执行上一步的命令就行"><a class="anchor" href="#耐心等待遇到下载超时报错的情况再次执行上一步的命令就行">#</a> 耐心等待，遇到下载超时报错的情况，再次执行上一步的命令就行</h6></li></ul></li><li><h5 id="不使用anaconda默认不控制依赖库位置"><a class="anchor" href="#不使用anaconda默认不控制依赖库位置">#</a> 不使用 Anaconda（默认不控制依赖库位置）</h5><ul><li><h6 id="直接点击项目根目录下的webui-userbat文件"><a class="anchor" href="#直接点击项目根目录下的webui-userbat文件">#</a> 直接点击项目根目录下的 webui-user.bat 文件</h6></li><li><h6 id="耐心等待遇到下载超时报错的情况点击继续退出命令行后再次点击该bat文件就行"><a class="anchor" href="#耐心等待遇到下载超时报错的情况点击继续退出命令行后再次点击该bat文件就行">#</a> 耐心等待，遇到下载超时报错的情况，点击继续退出命令行后再次点击该 bat 文件就行</h6></li></ul></li><li><h6 id="如果前面操作无误那么在一阵耐心的等待后就会成功如下图"><a class="anchor" href="#如果前面操作无误那么在一阵耐心的等待后就会成功如下图">#</a> 如果前面操作无误，那么在一阵耐心的等待后，就会成功（如下图）：</h6><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211050413166.png" alt="image-20221105041328858"></p></li><li><h5 id="对比前面使用命令控制launchpy文件部署启动可以发现此启动方式在启动时对电脑的压力比前者下一些但警告语句也会多一些经过实测在同样的tag下此方式比上一种方式在生成图片的过程中对cpu与内存的要求更高但相对应的质量也会更高疑似pytorch的版本造成的影响gpu版比cpu版更要求性能"><a class="anchor" href="#对比前面使用命令控制launchpy文件部署启动可以发现此启动方式在启动时对电脑的压力比前者下一些但警告语句也会多一些经过实测在同样的tag下此方式比上一种方式在生成图片的过程中对cpu与内存的要求更高但相对应的质量也会更高疑似pytorch的版本造成的影响gpu版比cpu版更要求性能">#</a> 对比前面使用命令控制 launch.py 文件部署启动，可以发现，此启动方式在启动时对电脑的压力比前者下一些，但警告语句也会多一些，经过实测，在同样的 tag 下，此方式比上一种方式在生成图片的过程中对 CPU 与内存的要求更高，但相对应的，质量也会更高，疑似 pytorch 的版本造成的影响（GPU 版比 CPU 版更要求性能？）</h5><p><img data-src="https://obssh.obs.cn-east-3.myhuaweicloud.com/img_xunguang/202211050422950.png" alt="00000-3717904703-masterpiece, best quality,obliques , 1girl, magic, vivid, looking at viewer, from above, black hair, black eyes, floating, flowi"></p></li></ul><h4 id="注后面是一些level-4会参考到的教程"><a class="anchor" href="#注后面是一些level-4会参考到的教程">#</a> 注：后面是一些 level 4 会参考到的教程</h4><ul><li>[NovelAi 配置大致流程](<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2M0MDY0OTU3NjIvYXJ0aWNsZS9kZXRhaWxzLzEyNzQxOTQ3NA==">(13 条消息) AI 杀疯了，NovelAI 开源教程_Jack-Cui 的博客 - CSDN 博客_csnd</span>)</li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXVnNDExODc5Vy8/aXNfc3RvcnlfaDU9ZmFsc2UmYW1wO3A9MSZhbXA7c2hhcmVfZnJvbT11Z2MmYW1wO3NoYXJlX21lZGl1bT1hbmRyb2lkJmFtcDtzaGFyZV9wbGF0PWFuZHJvaWQmYW1wO3NoYXJlX3Nlc3Npb25faWQ9Y2UxOTQxNWQtMGZjMy00YTBlLWJmMjctNTg3ZWM5NWNlMmEzJmFtcDtzaGFyZV9zb3VyY2U9UVEmYW1wO3NoYXJlX3RhZz1zX2kmYW1wO3RpbWVzdGFtcD0xNjY3NDA2MDk5JmFtcDt1bmlxdWVfaz1tRk1Nbmhy">让 NovelAI 强制用 CPU 跑</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3JlYWQvY3YxOTA4MjM4OA==">用 webui-user.bat 开启项目</span></li></ul></li><li><h6 id="httpswwwbilibilicomvideobv1ug411879wis_story_h5falsep1share_fromugcshare_mediumandroidshare_platandroidshare_session_idce19415d-0fc3-4a0e-bf27-587ec95ce2a3share_sourceqqshare_tags_itimestamp1667406099unique_kmfmmnhr"><a class="anchor" href="#httpswwwbilibilicomvideobv1ug411879wis_story_h5falsep1share_fromugcshare_mediumandroidshare_platandroidshare_session_idce19415d-0fc3-4a0e-bf27-587ec95ce2a3share_sourceqqshare_tags_itimestamp1667406099unique_kmfmmnhr">#</a> <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXVnNDExODc5Vy8/aXNfc3RvcnlfaDU9ZmFsc2UmYW1wO3A9MSZhbXA7c2hhcmVfZnJvbT11Z2MmYW1wO3NoYXJlX21lZGl1bT1hbmRyb2lkJmFtcDtzaGFyZV9wbGF0PWFuZHJvaWQmYW1wO3NoYXJlX3Nlc3Npb25faWQ9Y2UxOTQxNWQtMGZjMy00YTBlLWJmMjctNTg3ZWM5NWNlMmEzJmFtcDtzaGFyZV9zb3VyY2U9UVEmYW1wO3NoYXJlX3RhZz1zX2kmYW1wO3RpbWVzdGFtcD0xNjY3NDA2MDk5JmFtcDt1bmlxdWVfaz1tRk1Nbmhy">https://www.bilibili.com/video/BV1ug411879W/?is_story_h5=false&amp;p=1&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=ce19415d-0fc3-4a0e-bf27-587ec95ce2a3&amp;share_source=QQ&amp;share_tag=s_i&amp;timestamp=1667406099&amp;unique_k=mFMMnhr</span>)</h6></li></ul><div class="tags"><a href="/Black-Skyline/Black-Skyline.github.io/tags/red-rock-third-homework-level-0-level-4/" rel="tag"><i class="ic i-tag"></i>red_rock third_homework level 0 ~ level 4</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="2022/11/03/Python/第三次课后作业（py）/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2023-04-15 00:19:52" itemprop="dateModified" datetime="2023-04-15T00:19:52+08:00">2023-04-15</time></span><script type="module" data-pjax="data-pjax">import { pageviewCount } from 'https://unpkg.com/@waline/client/dist/pageview.mjs';

const path = document.getElementById("twikoo_visitors").getAttribute("data-path");
pageviewCount({
    serverURL: '',
    path: path,
});</script></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/Black-Skyline/Black-Skyline.github.io/assets/wechatpay.png" alt="寻光 微信支付"><p>微信支付</p></div><div><img data-src="/Black-Skyline/Black-Skyline.github.io/assets/alipay.png" alt="寻光 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>寻光<i class="ic i-at"><em>@</em></i>黑色天际线的博客空间</li><li class="link"><strong>本文链接：</strong><a href="https://github.com/Black-Skyline/Black-Skyline.github.io/2022/11/03/Python/%E7%AC%AC%E4%B8%89%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88py%EF%BC%89/" title="第三次课后作业（py）">https://github.com/Black-Skyline/Black-Skyline.github.io/2022/11/03/Python/第三次课后作业（py）/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Black-Skyline/Black-Skyline.github.io/2022/11/03/C&C++/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88C%E8%AF%AD%E8%A8%80%EF%BC%89/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicitcxhpij20zk0m8hdt.jpg" title="第二次课后作业（C语言）"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>undefined</span><h3>第二次课后作业（C语言）</h3></a></div><div class="item right"></div></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#level-0"><span class="toc-number">1.</span> <span class="toc-text">level 0</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#level-1"><span class="toc-number">2.</span> <span class="toc-text">level 1</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#level-2"><span class="toc-number">3.</span> <span class="toc-text">level 2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#level-3"><span class="toc-number">4.</span> <span class="toc-text">level 3</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#level-4%E5%9F%BA%E4%BA%8Egithub%E4%B8%8A%E7%9A%84stable-diffusion-web-ui-%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%9B%BE%E7%89%87%E7%94%9F%E6%88%90windows%E7%B3%BB%E7%BB%9F"><span class="toc-number">5.</span> <span class="toc-text">level 4—— 基于 GitHub 上的 Stable Diffusion web UI 开源项目的图片生成（Windows 系统）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E8%AF%9D"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">写在前面的话：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E9%9C%80%E6%B1%82%E5%AF%B9%E5%8E%9F%E6%9D%A5%E7%9A%84%E4%BB%A3%E7%A0%81%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E5%90%AF%E5%8A%A8%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E4%BD%9C%E5%87%BA%E4%B8%80%E4%BA%9B%E4%BC%98%E5%8C%96%E5%B9%B6%E7%BB%99%E5%87%BA%E7%82%B9%E5%87%BB%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AE%E5%AF%B9%E5%BA%94%E4%B8%8D%E5%90%8C%E7%9A%84%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B"><span class="toc-number">5.0.1.</span> <span class="toc-text">应需求对原来的 “代码 + 命令行” 的启动启动方式作出一些优化，并给出点击自动启动的方式配置：（对应不同的配置过程）</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%E4%BB%A3%E7%A0%81%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E5%90%AF%E5%8A%A8%E9%BB%98%E8%AE%A4%E5%B7%B2%E6%9C%89git"><span class="toc-number">5.1.</span> <span class="toc-text">方式一：“代码 + 命令行” 的启动（默认已有 git）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%E7%82%B9%E5%87%BB%E5%90%AF%E5%8A%A8%E9%BB%98%E8%AE%A4%E5%B7%B2%E6%9C%89python3%E7%8E%AF%E5%A2%83%E5%92%8Cgit"><span class="toc-number">5.2.</span> <span class="toc-text">方式二：点击启动（默认已有 python3 环境和 git）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">方式一配置过程：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E4%B8%BAai%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%87%86%E5%A4%87%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%B7%B2%E6%9C%89python3%E7%8E%AF%E5%A2%83"><span class="toc-number">6.1.</span> <span class="toc-text">一、为 AI 深度学习准备的环境配置 —— 默认已有 python3 环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85anacondapython%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86%E5%92%8C%E7%8E%AF%E5%A2%83%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">6.1.1.</span> <span class="toc-text">（可选择安装）Anaconda——python 的包管理和环境管理器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8anaconda%E5%B0%B1%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%E4%B8%80%E4%BB%A3%E7%A0%81%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%9B%E8%A1%8C%E5%90%AF%E5%8A%A8"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">注：安装使用 Anaconda 就默认使用方式一：“代码 + 命令行” 进行启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#q%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AE%89%E8%BF%99%E4%B8%AA%E8%A7%89%E5%BE%97%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8F%AF%E4%BB%A5%E4%B8%8D%E5%AE%89"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">Q：为什么要安这个？（觉得不需要可以不安）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#a%E6%96%B9%E4%BE%BF%E9%85%8D%E7%BD%AEpy%E7%9A%84%E8%99%9A%E6%8B%9F%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83%E9%99%8D%E4%BD%8Epython%E5%90%84%E7%A7%8D%E5%BA%93%E7%9A%84%E8%AF%95%E9%94%99%E6%88%90%E6%9C%AC%E5%92%8C%E5%AD%A6%E4%B9%A0%E5%B0%9D%E8%AF%95%E9%A3%8E%E9%99%A9"><span class="toc-number">6.1.1.3.</span> <span class="toc-text">A：方便配置 py 的虚拟编译环境，降低 python 各种库的试错成本和学习尝试风险</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#q%E6%80%8E%E4%B9%88%E5%AE%89"><span class="toc-number">6.1.1.4.</span> <span class="toc-text">Q：怎么安？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a%E5%AE%98%E7%BD%91anaconda-anaconda-distribution%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%A4%AA%E6%85%A2%E5%95%A6%E6%88%96%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E8%BD%AF%E4%BB%B6%E6%BA%90%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%BF%AB%E4%BE%8B%E5%A6%82%E6%B8%85%E5%8D%8E%E7%9A%84%E9%95%9C%E5%83%8F%E7%AB%99index-of-anacondaarchive-%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E5%BC%80%E6%BA%90%E8%BD%AF%E4%BB%B6%E9%95%9C%E5%83%8F%E7%AB%99-tsinghua-open-source-mirror"><span class="toc-number">6.1.1.4.1.</span> <span class="toc-text">A：[官网](Anaconda | Anaconda Distribution) 下载安装（太慢啦）或国内镜像软件源下载安装（快）例如 [清华的镜像站](Index of &#x2F;anaconda&#x2F;archive&#x2F; | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8"><span class="toc-number">6.1.1.4.2.</span> <span class="toc-text">注：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%98%E7%BD%91%E4%B8%8B%E8%BD%BD%E7%82%B9%E5%87%BB%E4%B9%8B%E5%90%8E%E5%8F%AF%E8%83%BD%E4%BC%9A%E8%B7%B3%E8%BD%AC%E8%AE%A2%E9%98%85%E6%B3%A8%E5%86%8C%E9%A1%B5%E9%9D%A2%E6%AD%A4%E6%97%B6%E9%9C%80%E8%A6%81-%E9%BC%A0%E6%A0%87%E5%8F%B3%E5%87%BB%E4%B8%8B%E8%BD%BD%E6%8C%89%E9%92%AE%E9%80%89%E6%8B%A9%E5%9C%A8%E6%96%B0%E6%A0%87%E7%AD%BE%E9%A1%B5%E4%B8%AD%E6%89%93%E5%BC%80%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E4%BA%86"><span class="toc-number">6.1.1.4.2.1.</span> <span class="toc-text">官网下载点击之后可能会跳转订阅注册页面，此时需要 鼠标右击下载按钮 —&gt; 选择在新标签页中打开就可以直接下载了</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9C%A8%E9%95%9C%E5%83%8F%E7%AB%99%E4%B8%8B%E8%BD%BD%E8%A6%81%E6%B3%A8%E6%84%8F%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98%E4%B8%80%E8%88%AC%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8C%E9%A1%B9%E7%9A%84%E5%90%8D%E7%A7%B0%E5%92%8C%E4%B8%8A%E4%BC%A0%E6%97%B6%E9%97%B4%E7%A1%AE%E8%AE%A4"><span class="toc-number">6.1.1.4.2.2.</span> <span class="toc-text">在镜像站下载要注意版本问题，一般根据不同项的名称和上传时间确认</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%AC%E4%BA%BA%E9%80%89%E6%8B%A9%E7%9A%84%E6%98%AFanaconda3-202210-windows-x86_64exe-%E5%8F%AF%E6%89%A7%E8%A1%8C%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.1.1.4.2.3.</span> <span class="toc-text">本人选择的是 Anaconda3-2022.10-Windows-x86_64.exe (可执行安装程序)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%97%B6%E8%AE%B0%E4%BD%8F%E5%AE%89%E8%A3%85%E7%9A%84%E4%BD%8D%E7%BD%AE%E6%9C%80%E5%A5%BD%E4%B8%8D%E8%A6%81%E6%94%BEc%E7%9B%98"><span class="toc-number">6.1.1.4.2.4.</span> <span class="toc-text">安装时记住安装的位置，最好不要放 C 盘</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%97%B6%E6%9C%80%E5%A5%BD%E5%8B%BE%E9%80%89%E4%B8%8A%E8%87%AA%E5%8A%A8%E6%8A%8Aanaconda%E6%B7%BB%E5%8A%A0%E8%BF%9Bpath%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%87%8C"><span class="toc-number">6.1.1.4.2.5.</span> <span class="toc-text">安装时最好勾选上自动把 anaconda 添加进 PATH（系统环境变量）里</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E5%9C%A8cmd%E9%87%8C%E8%BE%93%E5%85%A5conda-list-%E6%A3%80%E6%9F%A5%E5%AE%89%E8%A3%85%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F"><span class="toc-number">6.1.1.4.2.6.</span> <span class="toc-text">安装完成后在 cmd 里输入 conda list 检查安装是否成功</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%A6%E5%A4%96%E5%AE%89%E8%A3%85%E5%A5%BDanaconda%E5%90%8E%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84-%E9%9D%9E%E7%B3%BB%E7%BB%9Fpath%E4%B8%8B%E7%9A%84py%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83"><span class="toc-number">6.1.1.4.2.7.</span> <span class="toc-text">另外，安装好 anaconda 后，我们可以搭建一个简单的、非系统 PATH 下的 py 编译环境：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#ps%E5%BB%BA%E8%AE%AE%E8%83%BD%E6%8D%A2%E5%B0%B1%E6%8D%A2%E4%B8%8D%E7%84%B6%E9%BB%98%E8%AE%A4%E7%9A%84%E6%BA%90%E6%98%AF%E5%9B%BD%E5%A4%96%E7%BD%91%E5%9D%80%E4%B8%8B%E4%B8%9C%E8%A5%BF%E6%85%A2%E8%BF%98%E4%B8%8D%E7%A8%B3%E5%AE%9A%E7%A8%8D%E5%BE%AE%E4%B8%8B%E4%B8%AA%E5%A4%A7%E7%82%B9%E7%9A%84%E4%B8%9C%E8%A5%BF%E5%B0%B1%E8%B6%85%E6%97%B6%E6%8A%A5%E9%94%99"><span class="toc-number">6.1.1.4.2.8.</span> <span class="toc-text">PS：建议能换就换，不然默认的源是国外网址（下东西慢还不稳定，稍微下个大点的东西就超时报错・・・）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8python%E7%89%88%E6%9C%AC%E6%9C%80%E5%A5%BD%E6%98%AF3106%E6%88%96%E5%A4%A7%E4%BA%8E%E8%BF%99%E4%B8%AA%E7%89%88%E6%9C%AC%E5%8F%B7%E5%9B%A0%E4%B8%BA%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%BB%BA%E8%AE%AE%E5%B0%B1%E6%98%AF3106"><span class="toc-number">6.1.1.4.2.9.</span> <span class="toc-text">注：python 版本最好是 3.10.6 或大于这个版本号，因为项目的建议就是 3.10.6</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E8%87%AA%E5%B7%B1%E5%88%9B%E5%BB%BA%E7%9A%84%E9%9D%9Ebase%E7%9A%84%E7%8E%AF%E5%A2%83%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E9%83%BD%E4%BC%9A%E7%BB%9F%E4%B8%80%E6%94%BE%E5%9C%A8anaconda%E6%96%87%E4%BB%B6%E5%A4%B9%E9%87%8C%E7%9A%84envs%E6%96%87%E4%BB%B6%E5%A4%B9%E5%86%85"><span class="toc-number">6.1.1.4.2.10.</span> <span class="toc-text">注：自己创建的非 base 的环境的文件夹，都会统一放在 Anaconda 文件夹里的 envs 文件夹内</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%85%E5%AE%89pytorch"><span class="toc-number">6.1.2.</span> <span class="toc-text">（必安）Pytorch</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8pytorch%E6%98%AF%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE%E8%83%BD%E8%B7%91%E8%B5%B7%E6%9D%A5%E7%9A%84%E5%BF%85%E8%A6%81%E4%BE%9D%E8%B5%96%E5%BA%93%E4%B9%8B%E4%B8%80%E7%90%86%E8%AE%BA%E4%B8%8A%E5%8F%AF%E4%BB%A5%E7%AD%89%E4%B8%8B%E5%92%8C%E5%85%B6%E4%BB%96%E4%BE%9D%E8%B5%96%E5%BA%93%E4%B8%80%E8%B5%B7%E5%AE%89%E8%A3%85%E4%BD%86%E6%98%AF%E5%9C%A8%E9%82%A3%E4%B8%AA%E6%97%B6%E5%80%99%E5%AE%89%E8%A3%85%E7%9A%84pytorch%E4%B8%8D%E4%B8%80%E5%AE%9A%E6%98%AFcpu%E7%89%88%E6%A0%B8%E6%98%BE%E4%BD%AC%E7%9A%84%E5%93%AD%E6%B3%A3%E6%89%80%E4%BB%A5%E5%BB%BA%E8%AE%AE%E6%8F%90%E5%89%8D%E5%AE%89%E8%A3%85%E5%A5%BDcpu%E7%89%88%E7%9A%84"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">注：pytorch 是这个项目能跑起来的必要依赖库之一，理论上可以等下和其他依赖库一起安装，但是在那个时候安装的 Pytorch 不一定是 CPU 版（核显佬的哭泣・・・），所以建议提前安装好 CPU 版的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4"><span class="toc-number">6.1.2.2.</span> <span class="toc-text">获取安装命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="toc-number">6.1.2.3.</span> <span class="toc-text">进行安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8pip%E5%AE%89%E8%A3%85"><span class="toc-number">6.1.2.3.1.</span> <span class="toc-text">用 pip 安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8conda%E5%AE%89%E8%A3%85"><span class="toc-number">6.1.2.3.2.</span> <span class="toc-text">用 conda 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%B6%E4%B8%ADnovelai-%E6%98%AFpy%E7%8E%AF%E5%A2%83%E5%90%8D%E5%90%8E%E9%9D%A2%E6%98%AF%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95%E8%BF%99%E9%87%8C%E7%9A%84%E8%BF%99%E4%B8%AA%E5%8A%9F%E7%BD%AA%E7%9B%AE%E5%BD%95%E9%9A%8F%E6%84%8F"><span class="toc-number">6.1.2.3.2.1.</span> <span class="toc-text">其中， (novelai) 是 py 环境名，后面是工作目录 (这里的这个功罪目录随意)，</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E5%BC%80%E5%A7%8Bstable-diffusion-web-ui%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.</span> <span class="toc-text">二、开始 Stable Diffusion web UI 项目文件的配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDnovalai%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E6%96%87%E4%BB%B6%E7%82%B9%E5%87%BB%E6%AD%A4%E5%A4%84-%E6%96%87%E4%BB%B6%E5%BE%88%E5%A4%A7%E5%A4%A7%E5%A4%A7"><span class="toc-number">6.2.0.0.1.</span> <span class="toc-text">下载 NovalAI 模型训练文件 (点击此处) (文件很大大大・・・・・・)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96stable-diffusion-web-ui%E9%A1%B9%E7%9B%AE%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-number">6.2.0.0.2.</span> <span class="toc-text">获取 Stable Diffusion web UI 项目源代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%86%E4%B8%8B%E8%BD%BD%E7%9A%84novalai%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%E5%8C%85%E9%87%8C%E7%9A%84stable-diffusionrar%E8%A7%A3%E5%8E%8B%E5%88%B0%E9%A1%B9%E7%9B%AE%E6%BA%90%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9stable-diffusion-webui%E9%87%8C%E7%9A%84%E5%AF%B9%E5%BA%94%E4%BD%8D%E7%BD%AE"><span class="toc-number">6.2.0.0.3.</span> <span class="toc-text">将下载的 NovalAI 模型训练文件压缩包里的 Stable-diffusion.rar 解压到项目源代码文件夹 stable-diffusion-webui 里的对应位置:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E8%BF%87%E9%80%9A%E8%BF%87%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%89%E8%A3%85%E6%9C%89%E4%B8%AA%E7%BC%BA%E7%82%B9%E5%B0%B1%E6%98%AF%E4%B8%8D%E8%83%BD%E5%8F%8A%E6%97%B6%E5%BE%97%E5%88%B0%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E6%89%80%E4%BB%A5%E5%BB%BA%E8%AE%AE%E5%8F%AF%E4%BB%A5%E5%85%88%E4%B8%8D%E4%B8%8B%E8%BD%BD%E8%BF%99%E4%B8%AA%E5%BA%93%E7%AD%89%E5%88%B0%E6%9C%80%E5%90%8E%E8%BF%9B%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%BF%90%E8%A1%8C%E6%97%B6%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%A3%80%E6%B5%8B%E4%B8%8B%E8%BD%BD%E8%BF%99%E4%B8%AA%E5%BA%93"><span class="toc-number">6.2.0.1.</span> <span class="toc-text">不过通过上面的代码安装有个缺点，就是不能及时得到自动更新，所以 —— 建议可以先不下载这个库，等到最后进行命令运行时，会自动检测下载这个库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E4%B8%80%E6%AD%A5%E4%BF%AE%E6%94%B9%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84launchpy%E6%96%87%E4%BB%B6%E9%87%8D%E7%82%B9"><span class="toc-number">6.2.0.2.</span> <span class="toc-text">最重要的一步，修改项目根目录下的 launch.py 文件（重点）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E5%BC%80%E5%A7%8Brun%E9%A1%B9%E7%9B%AE%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%E6%9C%AC%E5%9C%B0%E7%AE%97%E6%B3%95%E9%83%A8%E7%BD%B2"><span class="toc-number">6.3.</span> <span class="toc-text">三、开始 run 项目测试一下（本地算法部署）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BB%B6%E7%BB%AD%E4%B8%8A%E4%B8%80%E6%AD%A5%E6%93%8D%E4%BD%9C%E6%BF%80%E6%B4%BBnovelai%E7%9A%84py%E7%8E%AF%E5%A2%83%E7%84%B6%E5%90%8Ecd-%E5%88%B0%E8%AF%A5%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%AE%8C%E6%88%90%E5%90%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%87%8C%E6%98%BE%E7%A4%BA%E5%A6%82%E4%B8%8B"><span class="toc-number">6.3.0.0.1.</span> <span class="toc-text">延续上一步操作，激活 novelai 的 py 环境，然后 cd 到该项目的根目录下，完成后命令行里显示如下：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8A%E5%9B%BE%E5%80%92%E6%95%B0%E7%AC%AC%E4%BA%8C%E8%A1%8C%E7%BB%99%E5%87%BA%E4%BA%86%E6%9C%AC%E5%9C%B0url%E8%BF%99%E6%98%AF%E5%BC%80%E5%90%AF%E6%88%90%E5%8A%9F%E7%9A%84%E6%A0%87%E5%BF%97"><span class="toc-number">6.3.0.0.2.</span> <span class="toc-text">上图倒数第二行给出了本地 URL，这是开启成功的标志，</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E9%85%8D%E7%BD%AE%E5%9B%BE%E7%89%87%E7%9A%84%E7%94%9F%E6%88%90%E8%A6%81%E7%B4%A0%E8%BF%9B%E8%A1%8C%E6%95%88%E6%9E%9C%E6%B5%8B%E8%AF%95%E5%9C%A8txt2img%E6%A0%87%E7%AD%BE%E4%B8%8B%E6%93%8D%E4%BD%9C"><span class="toc-number">6.3.0.0.3.</span> <span class="toc-text">开始配置图片的生成要素，进行效果测试（在 txt2img 标签下操作）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8cpu%E7%AE%97%E5%8A%9B%E7%8F%8D%E8%B4%B5%E4%B8%94%E7%94%A8%E4%B8%94%E7%8F%8D%E6%83%9C"><span class="toc-number">6.3.0.1.</span> <span class="toc-text">注：CPU 算力珍贵，且用且珍惜</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%8F%AF%E7%94%A8%E7%9A%84%E5%85%B3%E9%94%AE%E8%AF%8D%E8%AE%B0%E5%BD%95"><span class="toc-number">6.3.0.1.0.1.</span> <span class="toc-text">一些可用的关键词记录</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E7%94%9F%E6%88%90"><span class="toc-number">6.3.0.1.1.</span> <span class="toc-text">开始生成:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E5%8F%AF%E5%81%9A%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%87%BB%E5%8D%B3run%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="toc-number">6.4.</span> <span class="toc-text">四、（可做）添加点击即 run 项目的设置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%9C%B0%E8%AE%B2%E5%BE%88%E9%BA%BB%E7%83%A6"><span class="toc-number">6.4.0.0.1.</span> <span class="toc-text">简单地讲，很麻烦。</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%B8%80%E5%BC%80%E5%A7%8B%E5%B0%B1%E5%BC%84%E7%9A%84%E6%98%AF%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%90%E8%A1%8C%E7%8E%B0%E5%9C%A8%E6%83%B3%E8%BD%AC%E7%82%B9%E5%87%BB%E5%8D%B3run%E9%82%A3%E6%88%91%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E9%87%8D%E5%BC%80%E9%87%8D%E6%96%B0%E6%8C%89%E7%85%A7%E6%96%B9%E5%BC%8F%E4%BA%8C%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE"><span class="toc-number">6.4.0.0.1.1.</span> <span class="toc-text">如果一开始就弄的是命令行运行，现在想转点击即 run，那我建议直接重开 —— 重新按照方式二建立一个项目</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%B8%A4%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E9%83%BD%E6%83%B3%E8%A6%81%E5%BB%BA%E8%AE%AE%E7%94%B1%E6%96%B9%E5%BC%8F%E4%BA%8C%E7%9A%84%E7%82%B9%E5%87%BB%E5%8D%B3run%E5%BC%80%E5%A7%8B%E9%80%90%E6%AD%A5%E6%B7%BB%E5%8A%A0%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BF%90%E8%A1%8C"><span class="toc-number">6.4.0.0.1.2.</span> <span class="toc-text">如果两种启动方式都想要，建议由方式二的点击即 run 开始，逐步添加命令行运行・・・</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B"><span class="toc-number">7.</span> <span class="toc-text">方式二配置过程：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%87%86%E5%A4%87%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%B7%B2%E6%9C%89python3%E7%8E%AF%E5%A2%83"><span class="toc-number">7.1.</span> <span class="toc-text">一、准备的环境配置 —— 默认已有 python3 环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85anaconda"><span class="toc-number">7.1.1.</span> <span class="toc-text">（可选择安装）Anaconda</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#anaconda%E5%AE%89%E4%B8%8E%E4%B8%8D%E5%AE%89%E5%8F%AF%E8%87%AA%E8%A1%8C%E9%80%89%E6%8B%A9%E5%AE%83%E4%BB%AC%E7%9A%84%E5%8C%BA%E5%88%AB%E5%B0%B1%E5%9C%A8%E4%BA%8E"><span class="toc-number">7.1.1.1.</span> <span class="toc-text">Anaconda 安与不安可自行选择，它们的区别就在于：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%AE%89anaconda%E9%82%A3%E4%B9%8B%E5%90%8E%E5%A4%A7%E6%A6%82%E5%87%A0%E4%B8%AAg%E5%A4%A7%E5%B0%8F%E7%9A%84%E4%B8%80%E5%A0%86%E4%BE%9D%E8%B5%96%E5%BA%93%E5%B0%B1%E4%BC%9A%E9%BB%98%E8%AE%A4%E5%8A%A0%E8%A3%85%E5%9C%A8%E6%9C%AC%E5%9C%B0path%E8%B7%AF%E5%BE%84%E9%87%8C%E7%9A%84python%E7%8E%AF%E5%A2%83%E9%87%8C"><span class="toc-number">7.1.1.1.1.</span> <span class="toc-text">不安 anaconda，那之后大概几个 G 大小的一堆依赖库就会默认加装在本地 path 路径里的 python 环境里</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%89%E4%BA%86anaconda%E8%BF%99%E4%BA%9B%E4%BE%9D%E8%B5%96%E5%BA%93%E8%A2%AB%E5%AE%89%E5%9C%A8%E5%93%AA%E5%B0%86%E7%94%B1%E4%BD%A0%E8%87%AA%E8%A1%8C%E5%86%B3%E5%AE%9A%E4%B8%94%E5%AE%83%E4%BB%AC%E4%B8%8E%E6%9C%AC%E5%9C%B0path%E8%B7%AF%E5%BE%84%E9%87%8C%E7%9A%84python%E7%8E%AF%E5%A2%83%E6%98%AF%E9%9A%94%E7%A6%BB%E7%9A%84"><span class="toc-number">7.1.1.1.1.1.</span> <span class="toc-text">安了 anaconda，这些依赖库被安在哪将由你自行决定，且它们与本地 path 路径里的 python 环境是隔离的</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85dev-sidecar%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90"><span class="toc-number">7.1.2.</span> <span class="toc-text">（可选择安装）dev-sidecar（强烈推荐）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pytorch%E5%B0%B1%E5%90%8E%E9%9D%A2%E7%9A%84%E7%BB%93%E6%9E%9C%E6%9D%A5%E7%9C%8B%E6%9A%82%E6%97%B6%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8D%95%E7%8B%AC%E4%B8%8B%E8%BD%BD"><span class="toc-number">7.1.3.</span> <span class="toc-text">Pytorch（就后面的结果来看，暂时不需要单独下载）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E7%9A%84%E9%85%8D%E7%BD%AE%E9%83%A8%E5%88%86%E5%8F%82%E7%85%A7%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">7.2.</span> <span class="toc-text">二、项目文件的配置 —— 部分参照方式一</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDnovalai%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E6%96%87%E4%BB%B6%E5%90%8C%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">7.2.0.1.</span> <span class="toc-text">下载 NovalAI 模型训练文件 —— 同方式一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96stable-diffusion-web-ui%E9%A1%B9%E7%9B%AE%E6%BA%90%E4%BB%A3%E7%A0%81%E5%90%8C%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">7.2.0.2.</span> <span class="toc-text">获取 Stable Diffusion web UI 项目源代码 —— 同方式一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%85%E9%9C%80%E8%A6%81novalai%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83%E6%96%87%E4%BB%B6%E6%94%BE%E7%BD%AE%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%E5%AF%B9%E5%BA%94%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B"><span class="toc-number">7.2.0.3.</span> <span class="toc-text">仅需要 NovalAI 模型训练文件放置到项目的对应文件夹下，</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%B3~stable-diffusion-webuimodelsstable-diffusion"><span class="toc-number">7.2.0.4.</span> <span class="toc-text">即 ~\stable-diffusion-webui\models\Stable-diffusion</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E9%87%8D%E8%A6%81%E7%9A%84%E4%B8%80%E6%AD%A5%E4%BF%AE%E6%94%B9%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84launchpy%E6%96%87%E4%BB%B6%E9%87%8D%E7%82%B9%E5%92%8Cwebui-userbat%E6%96%87%E4%BB%B6%E9%87%8D%E7%82%B9"><span class="toc-number">7.2.0.5.</span> <span class="toc-text">最重要的一步，修改项目根目录下的 launch.py 文件（重点）和 webui-user.bat 文件（重点）：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">7.3.</span> <span class="toc-text">注意：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%83%B3%E7%94%A8anaconda%E6%8E%A7%E5%88%B6%E9%82%A3%E5%A4%A7%E6%A6%824%E4%B8%AAg%E5%B7%A6%E5%8F%B3%E4%BE%9D%E8%B5%96%E5%BA%93%E7%9A%84%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE%E8%AF%B7%E4%B8%80%E5%AE%9A%E4%B8%8D%E8%A6%81%E5%9C%A8%E6%AD%A4%E6%97%B6%E5%B7%A6%E9%94%AE%E5%AE%83%E6%88%96%E8%80%85%E4%BD%BF%E5%AE%83%E8%BF%90%E8%A1%8C"><span class="toc-number">7.4.</span> <span class="toc-text">如果你想用 Anaconda 控制那大概 4 个 G 左右依赖库的存储位置，请” 一定不要 “在此时左键它或者使它运行，</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%80%8C%E9%9C%80%E8%A6%81%E5%9C%A8anaconda-prompt%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%96%B0%E5%BB%BA%E5%A5%BD%E4%B8%80%E4%B8%AA%E9%9D%9E%E7%B3%BB%E7%BB%9Fpath%E7%9A%84python%E7%8E%AF%E5%A2%83%E6%BF%80%E6%B4%BB%E8%AF%A5%E7%8E%AF%E5%A2%83%E5%90%8Ecd%E5%88%B0%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E8%BF%99%E4%BA%9B%E6%93%8D%E4%BD%9C%E5%8F%82%E7%85%A7%E6%96%B9%E5%BC%8F%E4%B8%80%E4%B8%AD%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9%E7%84%B6%E5%90%8E%E5%86%8D%E8%BF%90%E8%A1%8C%E5%AE%83"><span class="toc-number">7.5.</span> <span class="toc-text">而需要在 Anaconda Prompt 程序中新建好一个非系统 path 的 python 环境，激活该环境后 cd 到项目根目录下（这些操作参照方式一中相关内容），然后再运行它</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E7%9B%B4%E6%8E%A5%E5%BC%80%E5%A7%8Brun%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%A7%8B%E7%AC%AC%E4%B8%80%E6%AC%A1%E9%83%A8%E7%BD%B2"><span class="toc-number">7.6.</span> <span class="toc-text">三、直接开始 run 项目开始第一次部署</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8anaconda%E5%8F%AA%E8%A6%81%E5%AE%8C%E6%88%90%E7%AC%AC%E4%B8%80%E6%AC%A1%E9%83%A8%E7%BD%B2%E5%90%8E%E4%BB%A5%E5%90%8E%E5%86%8D%E6%AC%A1%E8%BF%90%E8%A1%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E7%82%B9%E5%87%BBwebui-userbat%E5%8D%B3%E8%BF%90%E8%A1%8C"><span class="toc-number">7.6.0.0.1.</span> <span class="toc-text">使用 Anaconda：（只要完成第一次部署后，以后再次运行可以直接点击 webui-user.bat 即运行）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%93%E5%BC%80anaconda-prompt%E7%A8%8B%E5%BA%8F%E6%BF%80%E6%B4%BB%E6%9F%90%E4%B8%AA%E6%83%B3%E5%AD%98%E6%94%BE%E4%BE%9D%E8%B5%96%E5%BA%93%E7%9A%84py%E7%8E%AF%E5%A2%83"><span class="toc-number">7.6.0.0.1.1.</span> <span class="toc-text">打开 Anaconda Prompt 程序，激活某个想存放依赖库的 py 环境，</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#cd%E5%88%B0%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%B9%B6%E8%BE%93%E5%85%A5%E5%91%BD%E4%BB%A4webui-userbat%E7%84%B6%E5%90%8E%E5%9B%9E%E8%BD%A6"><span class="toc-number">7.6.0.0.1.2.</span> <span class="toc-text">cd 到项目根目录下，并输入命令 .\webui-user.bat ，然后回车，</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%80%90%E5%BF%83%E7%AD%89%E5%BE%85%E9%81%87%E5%88%B0%E4%B8%8B%E8%BD%BD%E8%B6%85%E6%97%B6%E6%8A%A5%E9%94%99%E7%9A%84%E6%83%85%E5%86%B5%E5%86%8D%E6%AC%A1%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%80%E6%AD%A5%E7%9A%84%E5%91%BD%E4%BB%A4%E5%B0%B1%E8%A1%8C"><span class="toc-number">7.6.0.0.1.3.</span> <span class="toc-text">耐心等待，遇到下载超时报错的情况，再次执行上一步的命令就行</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8anaconda%E9%BB%98%E8%AE%A4%E4%B8%8D%E6%8E%A7%E5%88%B6%E4%BE%9D%E8%B5%96%E5%BA%93%E4%BD%8D%E7%BD%AE"><span class="toc-number">7.6.0.0.2.</span> <span class="toc-text">不使用 Anaconda（默认不控制依赖库位置）</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E7%82%B9%E5%87%BB%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84webui-userbat%E6%96%87%E4%BB%B6"><span class="toc-number">7.6.0.0.2.1.</span> <span class="toc-text">直接点击项目根目录下的 webui-user.bat 文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%80%90%E5%BF%83%E7%AD%89%E5%BE%85%E9%81%87%E5%88%B0%E4%B8%8B%E8%BD%BD%E8%B6%85%E6%97%B6%E6%8A%A5%E9%94%99%E7%9A%84%E6%83%85%E5%86%B5%E7%82%B9%E5%87%BB%E7%BB%A7%E7%BB%AD%E9%80%80%E5%87%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%90%8E%E5%86%8D%E6%AC%A1%E7%82%B9%E5%87%BB%E8%AF%A5bat%E6%96%87%E4%BB%B6%E5%B0%B1%E8%A1%8C"><span class="toc-number">7.6.0.0.2.2.</span> <span class="toc-text">耐心等待，遇到下载超时报错的情况，点击继续退出命令行后再次点击该 bat 文件就行</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E5%89%8D%E9%9D%A2%E6%93%8D%E4%BD%9C%E6%97%A0%E8%AF%AF%E9%82%A3%E4%B9%88%E5%9C%A8%E4%B8%80%E9%98%B5%E8%80%90%E5%BF%83%E7%9A%84%E7%AD%89%E5%BE%85%E5%90%8E%E5%B0%B1%E4%BC%9A%E6%88%90%E5%8A%9F%E5%A6%82%E4%B8%8B%E5%9B%BE"><span class="toc-number">7.6.0.0.2.3.</span> <span class="toc-text">如果前面操作无误，那么在一阵耐心的等待后，就会成功（如下图）：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E5%89%8D%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E6%8E%A7%E5%88%B6launchpy%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E5%90%AF%E5%8A%A8%E5%8F%AF%E4%BB%A5%E5%8F%91%E7%8E%B0%E6%AD%A4%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E5%9C%A8%E5%90%AF%E5%8A%A8%E6%97%B6%E5%AF%B9%E7%94%B5%E8%84%91%E7%9A%84%E5%8E%8B%E5%8A%9B%E6%AF%94%E5%89%8D%E8%80%85%E4%B8%8B%E4%B8%80%E4%BA%9B%E4%BD%86%E8%AD%A6%E5%91%8A%E8%AF%AD%E5%8F%A5%E4%B9%9F%E4%BC%9A%E5%A4%9A%E4%B8%80%E4%BA%9B%E7%BB%8F%E8%BF%87%E5%AE%9E%E6%B5%8B%E5%9C%A8%E5%90%8C%E6%A0%B7%E7%9A%84tag%E4%B8%8B%E6%AD%A4%E6%96%B9%E5%BC%8F%E6%AF%94%E4%B8%8A%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%9C%A8%E7%94%9F%E6%88%90%E5%9B%BE%E7%89%87%E7%9A%84%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%AF%B9cpu%E4%B8%8E%E5%86%85%E5%AD%98%E7%9A%84%E8%A6%81%E6%B1%82%E6%9B%B4%E9%AB%98%E4%BD%86%E7%9B%B8%E5%AF%B9%E5%BA%94%E7%9A%84%E8%B4%A8%E9%87%8F%E4%B9%9F%E4%BC%9A%E6%9B%B4%E9%AB%98%E7%96%91%E4%BC%BCpytorch%E7%9A%84%E7%89%88%E6%9C%AC%E9%80%A0%E6%88%90%E7%9A%84%E5%BD%B1%E5%93%8Dgpu%E7%89%88%E6%AF%94cpu%E7%89%88%E6%9B%B4%E8%A6%81%E6%B1%82%E6%80%A7%E8%83%BD"><span class="toc-number">7.6.0.0.3.</span> <span class="toc-text">对比前面使用命令控制 launch.py 文件部署启动，可以发现，此启动方式在启动时对电脑的压力比前者下一些，但警告语句也会多一些，经过实测，在同样的 tag 下，此方式比上一种方式在生成图片的过程中对 CPU 与内存的要求更高，但相对应的，质量也会更高，疑似 pytorch 的版本造成的影响（GPU 版比 CPU 版更要求性能？）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%90%8E%E9%9D%A2%E6%98%AF%E4%B8%80%E4%BA%9Blevel-4%E4%BC%9A%E5%8F%82%E8%80%83%E5%88%B0%E7%9A%84%E6%95%99%E7%A8%8B"><span class="toc-number">7.6.0.1.</span> <span class="toc-text">注：后面是一些 level 4 会参考到的教程</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#httpswwwbilibilicomvideobv1ug411879wis_story_h5falsep1share_fromugcshare_mediumandroidshare_platandroidshare_session_idce19415d-0fc3-4a0e-bf27-587ec95ce2a3share_sourceqqshare_tags_itimestamp1667406099unique_kmfmmnhr"><span class="toc-number">7.6.0.1.0.1.</span> <span class="toc-text">https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1ug411879W&#x2F;?is_story_h5&#x3D;false&amp;p&#x3D;1&amp;share_from&#x3D;ugc&amp;share_medium&#x3D;android&amp;share_plat&#x3D;android&amp;share_session_id&#x3D;ce19415d-0fc3-4a0e-bf27-587ec95ce2a3&amp;share_source&#x3D;QQ&amp;share_tag&#x3D;s_i&amp;timestamp&#x3D;1667406099&amp;unique_k&#x3D;mFMMnhr)</span></a></li></ol></li></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="寻光" data-src="/Black-Skyline/Black-Skyline.github.io/assets/avatar.jpg"><p class="name" itemprop="name">寻光</p><div class="description" itemprop="description">此博客空间为个人学习笔记上传处</div></div><nav class="state"><div class="item posts"><a href="/Black-Skyline/Black-Skyline.github.io/archives/"><span class="count">4</span><span class="name">文章</span></a></div><div class="item tags"><a href="/Black-Skyline/Black-Skyline.github.io/tags/"><span class="count">3</span><span class="name">标签</span></a></div></nav><div class="social"><a href="https://github.com/name" class="item github" title="https:&#x2F;&#x2F;github.com&#x2F;name"><i class="ic i-github"></i></a></div><div class="menu"><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/about/" rel="section"><i class="ic i-user"></i>关于本站</a></li><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/admiration/" rel="section"><i class="ic i-coffee"></i>赞赏博主</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/Black-Skyline/Black-Skyline.github.io/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/Black-Skyline/Black-Skyline.github.io/2022/11/03/C&C++/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88C%E8%AF%AD%E8%A8%80%EF%BC%89/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/Black-Skyline/Black-Skyline.github.io/2022/11/03/C&C++/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88C%E8%AF%AD%E8%A8%80%EF%BC%89/">第二次课后作业（C语言）</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Black-Skyline/Black-Skyline.github.io/2022/10/23/hello-world/">Hello World</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Black-Skyline/Black-Skyline.github.io/2022/11/03/Python/%E7%AC%AC%E4%B8%89%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%88py%EF%BC%89/">第三次课后作业（py）</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Black-Skyline/Black-Skyline.github.io/2022/10/23/Hexo/%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A/">第一次课后作业</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2023</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">寻光 @ testName</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">38k 字</span><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">35 分钟</span></div><div class="powered-by">基于 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & Theme.<a href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2022/11/03/Python/第三次课后作业（py）/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',outime:!0,template:'<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://polyfill.alicdn.com/polyfill.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.0.2/pace.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/animejs/3.2.0/anime.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/algoliasearch/4.12.1/algoliasearch-lite.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/instantsearch.js/4.39.0/instantsearch.production.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/lozad.js/1.16.0/lozad.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/quicklink/2.2.0/quicklink.umd.min.js"></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/??jquery/3.5.1/jquery.min.js,fancybox/3.5.7/jquery.fancybox.min.js,justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" async></script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/KaTeX/0.12.0/contrib/copy-tex.min.js" async></script><script src="https://unpkg.com/frappe-charts@1.5.0/dist/frappe-charts.min.iife.js"></script><script src="/Black-Skyline/Black-Skyline.github.io/js/app.js?v=0.2.3"></script></body></html>